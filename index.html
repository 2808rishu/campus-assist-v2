<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Assist v2.0 - Multilingual Campus Chatbot</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #f8fafc;
        }
        
        .chat-container { 
            height: 100vh; 
            display: flex; 
            background: #f3f4f6; 
        }
        
        .sidebar {
            background: white;
            border-right: 1px solid #e5e7eb;
            transition: all 0.3s;
            width: 64px;
        }
        
        .sidebar.expanded { width: 256px; }
        
        .sidebar-header {
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .menu-btn {
            padding: 8px;
            border: none;
            background: none;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .menu-btn:hover { background: #f3f4f6; }
        
        .nav-item {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            margin: 4px 8px;
            border: none;
            background: none;
            border-radius: 8px;
            cursor: pointer;
            color: #6b7280;
        }
        
        .nav-item.active {
            background: #eff6ff;
            color: #2563eb;
        }
        
        .nav-item:hover { background: #f3f4f6; }
        
        .main-chat {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .language-selector {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .language-selector select {
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 4px 12px;
            font-size: 14px;
        }
        
        .human-help-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            font-size: 14px;
        }
        
        .human-help-btn:hover { background: #f9fafb; }
        
        .messages-area {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }
        
        .message {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .message.user { justify-content: flex-end; }
        
        .message-content {
            display: flex;
            gap: 12px;
            max-width: 80%;
        }
        
        .message.user .message-content { flex-direction: row-reverse; }
        
        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .avatar.bot { background: #dbeafe; color: #2563eb; }
        .avatar.user { background: #f3f4f6; color: #6b7280; }
        
        .message-bubble {
            border-radius: 16px;
            padding: 12px 16px;
        }
        
        .message-bubble.bot {
            background: white;
            border: 1px solid #e5e7eb;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .message-bubble.user {
            background: #2563eb;
            color: white;
        }
        
        .message-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        
        .language-tag, .confidence-tag {
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 4px;
        }
        
        .language-tag {
            background: #f3f4f6;
            color: #374151;
        }
        
        .confidence-tag {
            background: #dbeafe;
            color: #1d4ed8;
        }
        
        .message-text {
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 4px;
        }
        
        .message-time {
            font-size: 12px;
            color: #6b7280;
        }
        
        .message.user .message-time { color: #bfdbfe; }
        
        .quick-actions {
            padding: 16px;
        }
        
        .quick-actions-panel {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border: 1px solid #e5e7eb;
        }
        
        .quick-actions-title {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 12px;
        }
        
        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 8px;
        }
        
        .action-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            background: #eff6ff;
            border-color: #93c5fd;
        }
        
        .action-icon { color: #2563eb; }
        
        .action-label {
            font-size: 12px;
            font-weight: 500;
            color: #374151;
        }
        
        .input-area {
            background: white;
            border-top: 1px solid #e5e7eb;
            padding: 16px;
        }
        
        .input-container {
            display: flex;
            gap: 8px;
        }
        
        .message-input {
            flex: 1;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 14px;
        }
        
        .message-input:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        .send-btn {
            padding: 12px 16px;
            background: #2563eb;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .send-btn:hover { background: #1d4ed8; }
        .send-btn:disabled { 
            background: #9ca3af; 
            cursor: not-allowed; 
        }
        
        .input-hint {
            font-size: 12px;
            color: #6b7280;
            text-align: center;
            margin-top: 8px;
        }
        
        .loading {
            display: flex;
            justify-content: flex-start;
        }
        
        .loading-bubble {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 16px;
            padding: 12px 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .loading-content {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid #e5e7eb;
            border-top: 2px solid #2563eb;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .hidden { display: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { 
            Send, PhoneCall, Globe, Bot, User, MessageCircle, 
            BarChart3, Settings, UserCog, Menu, CreditCard, 
            GraduationCap, Calendar, FileText, Clock, HelpCircle 
        } = LucideReact;

        // Multilingual support for 8 Indian languages as per SIH requirements
        const languages = [
            { code: "en", name: "English", nativeName: "English" },
            { code: "hi", name: "Hindi", nativeName: "हिंदी" },
            { code: "mr", name: "Marathi", nativeName: "मराठी" },
            { code: "gu", name: "Gujarati", nativeName: "ગુજરાતી" },
            { code: "bn", name: "Bengali", nativeName: "বাংলা" },
            { code: "ta", name: "Tamil", nativeName: "தமிழ்" },
            { code: "te", name: "Telugu", nativeName: "తెలుగు" },
            { code: "kn", name: "Kannada", nativeName: "ಕನ್ನಡ" }
        ];

        // Quick actions for common campus queries
        const quickActions = [
            { icon: CreditCard, label: "Fee Information", labelHi: "फीस की जानकारी", query: "Tell me about fee structure and payment deadlines" },
            { icon: GraduationCap, label: "Scholarships", labelHi: "छात्रवृत्ति", query: "What scholarships are available for students?" },
            { icon: Calendar, label: "Timetable", labelHi: "समय सारणी", query: "Show me the current class timetable and schedule" },
            { icon: FileText, label: "Admissions", labelHi: "प्रवेश", query: "How do I apply for admission? What are the requirements?" },
            { icon: Clock, label: "Exam Schedule", labelHi: "परीक्षा समय", query: "When are the upcoming exams and results?" },
            { icon: HelpCircle, label: "General Help", labelHi: "सामान्य सहायता", query: "What can you help me with? Show me all services" }
        ];

        // Sample responses in multiple languages
        const sampleResponses = {
            en: {
                greeting: "Hello! I'm your multilingual campus assistant. I can help you with fees, scholarships, timetables, admissions, and other college information. You can talk to me in Hindi, English, or any of our supported regional languages!",
                thinking: "Processing your query...",
                helpPrompt: "How can I assist you today?"
            },
            hi: {
                greeting: "नमस्ते! मैं आपका बहुभाषी कैंपस असिस्टेंट हूँ। मैं फीस, छात्रवृत्ति, समय सारणी, प्रवेश और अन्य कॉलेज की जानकारी में आपकी मदद कर सकता हूँ। आप हिंदी, अंग्रेजी या हमारी किसी भी समर्थित क्षेत्रीय भाषा में मुझसे बात कर सकते हैं!",
                thinking: "आपके प्रश्न को समझ रहा हूँ...",
                helpPrompt: "आज मैं आपकी कैसे सहायता कर सकता हूँ?"
            }
        };

        function CampusAssistant() {
            const [messages, setMessages] = useState([
                {
                    id: 1,
                    text: sampleResponses.en.greeting,
                    isBot: true,
                    timestamp: new Date(),
                    language: "en",
                    confidence: 1.0
                }
            ]);
            const [inputMessage, setInputMessage] = useState("");
            const [isLoading, setIsLoading] = useState(false);
            const [selectedLanguage, setSelectedLanguage] = useState("en");
            const [showQuickActions, setShowQuickActions] = useState(true);
            const [sidebarOpen, setSidebarOpen] = useState(false);
            const messagesEndRef = useRef(null);

            useEffect(() => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            }, [messages]);

            useEffect(() => {
                setMessages(prev => [
                    {
                        ...prev[0],
                        text: sampleResponses[selectedLanguage]?.greeting || sampleResponses.en.greeting,
                        language: selectedLanguage
                    },
                    ...prev.slice(1)
                ]);
            }, [selectedLanguage]);

            const handleSendMessage = (message = inputMessage) => {
                if (!message.trim()) return;

                const userMessage = {
                    id: Date.now(),
                    text: message,
                    isBot: false,
                    timestamp: new Date()
                };

                setMessages(prev => [...prev, userMessage]);
                setInputMessage("");
                setIsLoading(true);
                setShowQuickActions(false);

                setTimeout(() => {
                    let responseText = "";
                    const currentLang = sampleResponses[selectedLanguage] || sampleResponses.en;
                    
                    const lowerMessage = message.toLowerCase();
                    if (lowerMessage.includes('fee') || lowerMessage.includes('फीस')) {
                        responseText = selectedLanguage === 'hi' 
                            ? "फीस संबंधी जानकारी: शैक्षणिक वर्ष 2024-25 के लिए फीस ₹50,000 है। अंतिम तारीख 15 जनवरी है। ऑनलाइन भुगतान के लिए कॉलेज पोर्टल का उपयोग करें।"
                            : "Fee Information: The academic fee for 2024-25 is ₹50,000. Last date for payment is January 15th. You can pay online through the college portal.";
                    } else if (lowerMessage.includes('scholarship') || lowerMessage.includes('छात्रवृत्ति')) {
                        responseText = selectedLanguage === 'hi'
                            ? "छात्रवृत्ति जानकारी: मेधावी छात्रवृत्ति, आर्थिक सहायता, और विशेष श्रेणी छात्रवृत्ति उपलब्ध है। आवेदन की अंतिम तारीख 30 दिसंबर है।"
                            : "Scholarship Information: Merit scholarships, financial aid, and category-specific scholarships are available. Application deadline is December 30th.";
                    } else if (lowerMessage.includes('timetable') || lowerMessage.includes('समय')) {
                        responseText = selectedLanguage === 'hi'
                            ? "समय सारणी: कक्षाएं सुबह 9:00 बजे से शुरू होती हैं। नवीनतम समय सारणी कॉलेज वेबसाइट पर उपलब्ध है।"
                            : "Timetable: Classes start at 9:00 AM. The latest timetable is available on the college website and notice board.";
                    } else {
                        responseText = currentLang.helpPrompt + " I can help you with fees, scholarships, timetables, admissions, exam schedules, and general college information.";
                    }
                    
                    const botResponse = {
                        id: Date.now() + 1,
                        text: responseText,
                        isBot: true,
                        timestamp: new Date(),
                        language: selectedLanguage,
                        confidence: 0.95
                    };
                    
                    setMessages(prev => [...prev, botResponse]);
                    setIsLoading(false);
                }, 1500);
            };

            const handleKeyPress = (e) => {
                if (e.key === "Enter" && !e.shiftKey) {
                    e.preventDefault();
                    handleSendMessage();
                }
            };

            return (
                <div className="chat-container">
                    {/* Sidebar */}
                    <div className={`sidebar ${sidebarOpen ? 'expanded' : ''}`}>
                        <div className="sidebar-header">
                            <button className="menu-btn" onClick={() => setSidebarOpen(!sidebarOpen)}>
                                <Menu size={20} />
                            </button>
                            {sidebarOpen && <h2 style={{fontWeight: 'bold', color: '#111827'}}>Campus Assist</h2>}
                        </div>

                        <nav style={{padding: '0 8px'}}>
                            <button className="nav-item active">
                                <MessageCircle size={20} />
                                {sidebarOpen && <span>Chat</span>}
                            </button>
                            <button className="nav-item">
                                <BarChart3 size={20} />
                                {sidebarOpen && <span>Analytics</span>}
                            </button>
                            <button className="nav-item">
                                <UserCog size={20} />
                                {sidebarOpen && <span>Admin</span>}
                            </button>
                            <button className="nav-item">
                                <Settings size={20} />
                                {sidebarOpen && <span>Settings</span>}
                            </button>
                        </nav>
                    </div>

                    {/* Main Chat Area */}
                    <div className="main-chat">
                        {/* Header */}
                        <div className="chat-header">
                            <div>
                                <h1 style={{fontSize: '20px', fontWeight: 'bold', color: '#111827'}}>Multilingual Campus Assistant</h1>
                                <p style={{fontSize: '14px', color: '#6b7280'}}>Smart India Hackathon 2024 - Campus Query Solution</p>
                            </div>
                            <div className="header-controls">
                                <div className="language-selector">
                                    <Globe size={16} style={{color: '#6b7280'}} />
                                    <select 
                                        value={selectedLanguage} 
                                        onChange={(e) => setSelectedLanguage(e.target.value)}
                                    >
                                        {languages.map((lang) => (
                                            <option key={lang.code} value={lang.code}>
                                                {lang.nativeName}
                                            </option>
                                        ))}
                                    </select>
                                </div>
                                <button className="human-help-btn">
                                    <PhoneCall size={16} />
                                    Human Help
                                </button>
                            </div>
                        </div>

                        {/* Messages Area */}
                        <div className="messages-area">
                            {messages.map((message) => (
                                <div key={message.id} className={`message ${message.isBot ? 'bot' : 'user'}`}>
                                    <div className="message-content">
                                        <div className={`avatar ${message.isBot ? 'bot' : 'user'}`}>
                                            {message.isBot ? <Bot size={16} /> : <User size={16} />}
                                        </div>
                                        <div className={`message-bubble ${message.isBot ? 'bot' : 'user'}`}>
                                            {message.isBot && message.language && (
                                                <div className="message-meta">
                                                    <span className="language-tag">
                                                        {languages.find(l => l.code === message.language)?.name || 'English'}
                                                    </span>
                                                    {message.confidence && (
                                                        <span className="confidence-tag">
                                                            {Math.round(message.confidence * 100)}% confident
                                                        </span>
                                                    )}
                                                </div>
                                            )}
                                            <div className="message-text">{message.text}</div>
                                            {message.timestamp && (
                                                <div className="message-time">
                                                    {new Date(message.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            ))}

                            {isLoading && (
                                <div className="loading">
                                    <div className="loading-bubble">
                                        <div className="loading-content">
                                            <div className="spinner"></div>
                                            <span style={{fontSize: '14px', color: '#6b7280'}}>
                                                {sampleResponses[selectedLanguage]?.thinking || "Processing your query..."}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            )}

                            <div ref={messagesEndRef} />
                        </div>

                        {/* Quick Actions */}
                        {showQuickActions && messages.length <= 1 && (
                            <div className="quick-actions">
                                <div className="quick-actions-panel">
                                    <h3 className="quick-actions-title">
                                        {selectedLanguage === 'hi' ? 'त्वरित सहायता' : 'Quick Help'}
                                    </h3>
                                    <div className="actions-grid">
                                        {quickActions.map((action, index) => {
                                            const Icon = action.icon;
                                            return (
                                                <button
                                                    key={index}
                                                    className="action-btn"
                                                    onClick={() => handleSendMessage(action.query)}
                                                >
                                                    <Icon size={16} className="action-icon" />
                                                    <span className="action-label">
                                                        {selectedLanguage === 'hi' ? action.labelHi : action.label}
                                                    </span>
                                                </button>
                                            );
                                        })}
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Input Area */}
                        <div className="input-area">
                            <div className="input-container">
                                <input
                                    type="text"
                                    className="message-input"
                                    value={inputMessage}
                                    onChange={(e) => setInputMessage(e.target.value)}
                                    onKeyPress={handleKeyPress}
                                    placeholder={selectedLanguage === 'hi' ? 'यहाँ अपना प्रश्न लिखें...' : 'Type your question here...'}
                                    disabled={isLoading}
                                />
                                <button
                                    className="send-btn"
                                    onClick={() => handleSendMessage()}
                                    disabled={isLoading || !inputMessage.trim()}
                                >
                                    <Send size={20} />
                                </button>
                            </div>
                            <p className="input-hint">
                                {selectedLanguage === 'hi' 
                                    ? 'आप हिंदी, अंग्रेजी या अन्य भारतीय भाषाओं में प्रश्न पूछ सकते हैं'
                                    : 'You can ask questions in Hindi, English, or other Indian languages'
                                }
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<CampusAssistant />, document.getElementById('root'));
    </script>
</body>
</html>