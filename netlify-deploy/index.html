<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Assist v2.0 - Multilingual Campus Chatbot | SIH 2024</title>
    <meta name="description" content="Smart India Hackathon 2024 - Multilingual Campus Assistant for student queries in 8 Indian languages">
    <meta name="keywords" content="Smart India Hackathon, SIH 2024, Campus Assistant, Multilingual Chatbot, Hindi, English, Student Queries">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéì</text></svg>">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f8fafc; }
        .chat-container { height: 100vh; display: flex; background: #f3f4f6; }
        .sidebar { background: white; border-right: 1px solid #e5e7eb; transition: all 0.3s; width: 64px; }
        .sidebar.expanded { width: 256px; }
        .sidebar-header { padding: 16px; display: flex; align-items: center; gap: 12px; }
        .menu-btn { padding: 8px; border: none; background: none; border-radius: 8px; cursor: pointer; }
        .menu-btn:hover { background: #f3f4f6; }
        .nav-item { width: 100%; display: flex; align-items: center; gap: 12px; padding: 12px; margin: 4px 8px; border: none; background: none; border-radius: 8px; cursor: pointer; color: #6b7280; }
        .nav-item.active { background: #eff6ff; color: #2563eb; }
        .nav-item:hover { background: #f3f4f6; }
        .main-chat { flex: 1; display: flex; flex-direction: column; }
        .chat-header { background: white; border-bottom: 1px solid #e5e7eb; padding: 16px; display: flex; justify-content: space-between; align-items: center; }
        .header-controls { display: flex; align-items: center; gap: 12px; }
        .language-selector { display: flex; align-items: center; gap: 8px; }
        .language-selector select { border: 1px solid #d1d5db; border-radius: 6px; padding: 4px 12px; font-size: 14px; }
        .human-help-btn { display: flex; align-items: center; gap: 8px; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 8px; background: white; cursor: pointer; font-size: 14px; }
        .human-help-btn:hover { background: #f9fafb; }
        .messages-area { flex: 1; overflow-y: auto; padding: 16px; }
        .message { display: flex; gap: 12px; margin-bottom: 16px; }
        .message.user { justify-content: flex-end; }
        .message-content { display: flex; gap: 12px; max-width: 80%; }
        .message.user .message-content { flex-direction: row-reverse; }
        .avatar { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .avatar.bot { background: #dbeafe; color: #2563eb; }
        .avatar.user { background: #f3f4f6; color: #6b7280; }
        .message-bubble { border-radius: 16px; padding: 12px 16px; }
        .message-bubble.bot { background: white; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .message-bubble.user { background: #2563eb; color: white; }
        .message-meta { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
        .language-tag, .confidence-tag { font-size: 12px; padding: 2px 8px; border-radius: 4px; }
        .language-tag { background: #f3f4f6; color: #374151; }
        .confidence-tag { background: #dbeafe; color: #1d4ed8; }
        .message-text { font-size: 14px; line-height: 1.5; margin-bottom: 4px; }
        .message-time { font-size: 12px; color: #6b7280; }
        .message.user .message-time { color: #bfdbfe; }
        .quick-actions { padding: 16px; }
        .quick-actions-panel { background: white; border-radius: 12px; padding: 16px; border: 1px solid #e5e7eb; }
        .quick-actions-title { font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 12px; }
        .actions-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 8px; }
        /* Hide confidence scores and admin features from students */
        .confidence-tag { display: none !important; }
        .admin-only { display: none !important; }
        .student-view .admin-only { display: none !important; }
        
        /* Improved Quick Actions Design */
        .actions-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; }
        .action-btn { 
            display: flex; 
            align-items: center; 
            gap: 12px; 
            padding: 20px; 
            border: 2px solid #e5e7eb; 
            border-radius: 16px; 
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); 
            cursor: pointer; 
            text-align: left; 
            transition: all 0.3s ease; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .action-btn:hover { 
            background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%); 
            color: white; 
            transform: translateY(-2px); 
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.2);
            border-color: #2563eb;
        }
        .action-icon { color: #2563eb; font-size: 20px; transition: color 0.3s ease; }
        .action-btn:hover .action-icon { color: white; }
        .action-label { font-size: 14px; font-weight: 600; color: #374151; transition: color 0.3s ease; }
        .action-btn:hover .action-label { color: white; }
        
        /* Enhanced Responsive Design */
        @media (max-width: 768px) {
            .chat-container { flex-direction: column; }
            .sidebar { width: 100%; height: 60px; }
            .sidebar.expanded { width: 100%; height: auto; }
            .actions-grid { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; }
            .action-btn { padding: 16px; font-size: 13px; }
            .action-icon { font-size: 18px; }
            .chat-header { padding: 12px; }
            .header-controls { 
                display: flex; 
                flex-direction: row; 
                gap: 8px; 
                align-items: center; 
                justify-content: space-between; 
            }
            .language-selector { order: 1; }
            .human-help-btn { order: 2; padding: 6px 10px; font-size: 12px; }
            .message-content { max-width: 95%; }
            .quick-actions { padding: 12px; }
        }
        
        @media (max-width: 480px) {
            .actions-grid { grid-template-columns: 1fr; }
            .action-btn { padding: 14px; }
            .chat-header h1 { font-size: 18px; }
            .chat-header p { font-size: 12px; }
        }
        
        /* Enhanced message formatting for better readability */
        .message-text strong { color: #1f2937; font-weight: 700; }
        .message-text .fee-amount { 
            color: #059669; 
            font-weight: 700; 
            font-size: 16px; 
            background: #ecfdf5; 
            padding: 2px 6px; 
            border-radius: 4px; 
        }
        .message-text .deadline { 
            color: #dc2626; 
            font-weight: 600; 
            background: #fef2f2; 
            padding: 2px 6px; 
            border-radius: 4px; 
        }
        .message-text .portal-link { 
            color: #2563eb; 
            font-weight: 600; 
            text-decoration: underline; 
            background: #eff6ff; 
            padding: 2px 6px; 
            border-radius: 4px; 
        }
        .message-text .important-info {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 8px 12px;
            margin: 8px 0;
            border-radius: 6px;
        }
        .input-area { background: white; border-top: 1px solid #e5e7eb; padding: 16px; }
        .input-container { display: flex; gap: 8px; }
        .message-input { flex: 1; border: 1px solid #d1d5db; border-radius: 8px; padding: 12px 16px; font-size: 14px; }
        .message-input:focus { outline: none; border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1); }
        .send-btn { padding: 12px 16px; background: #2563eb; color: white; border: none; border-radius: 8px; cursor: pointer; }
        .send-btn:hover { background: #1d4ed8; }
        .send-btn:disabled { background: #9ca3af; cursor: not-allowed; }
        .input-hint { font-size: 12px; color: #6b7280; text-align: center; margin-top: 8px; }
        .loading { display: flex; justify-content: flex-start; }
        .loading-bubble { background: white; border: 1px solid #e5e7eb; border-radius: 16px; padding: 12px 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .loading-content { display: flex; align-items: center; gap: 8px; }
        .spinner { width: 16px; height: 16px; border: 2px solid #e5e7eb; border-top: 2px solid #2563eb; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .hidden { display: none; }
        
        /* API Configuration Styles */
        .api-modal {
            backdrop-filter: blur(4px);
        }
        
        .modal-content {
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .api-config-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <!-- Skip Links for Accessibility -->
    <div class="skip-links">
        <a href="#main-content" class="skip-link">Skip to main content</a>
        <a href="#sidebar" class="skip-link">Skip to navigation</a>
        <a href="#messageInput" class="skip-link">Skip to chat input</a>
    </div>
    
    <!-- Live Regions for Screen Reader Announcements -->
    <div id="live-region" class="live-region" aria-live="polite" aria-atomic="true"></div>
    <div id="assertive-live-region" class="live-region" aria-live="assertive" aria-atomic="true"></div>
    
    <div class="chat-container" role="application" aria-label="Multilingual Campus Assistant">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar" role="navigation" aria-label="Main navigation">
            <div class="sidebar-header">
                <button class="menu-btn" onclick="toggleSidebar()">‚ò∞</button>
                <h2 style="font-weight: bold; color: #111827; display: none;" id="sidebarTitle">Campus Assist</h2>
            </div>
            <nav style="padding: 0 8px;">
                <button class="nav-item active" onclick="showPage('chat')">
                    üí¨ <span style="display: none;" class="nav-text">Chat</span>
                </button>
                <button class="nav-item" onclick="showPage('knowledge')">
                    üìö <span style="display: none;" class="nav-text">Knowledge Base</span>
                </button>
                <button class="nav-item" onclick="showPage('assets')">
                    üíº <span style="display: none;" class="nav-text">College Assets</span>
                </button>
                <button class="nav-item admin-only" onclick="showPage('analytics')">
                    üìä <span style="display: none;" class="nav-text">Analytics</span>
                </button>
                <button class="nav-item admin-only" onclick="showPage('settings')">
                    ‚öôÔ∏è <span style="display: none;" class="nav-text">Settings</span>
                </button>
                <button class="nav-item student-only" onclick="showAdminLogin()">
                    üîê <span style="display: none;" class="nav-text">Admin Login</span>
                </button>
            </nav>
        </div>
        
        <!-- Main Chat Area -->
        <div class="main-chat">
            <!-- Enhanced Header with Better Layout -->
            <div class="chat-header">
                <div style="flex: 1;">
                    <h1 style="font-size: 20px; font-weight: bold; color: #111827; margin-bottom: 4px;">Multilingual Campus Assistant</h1>
                    <p style="font-size: 14px; color: #6b7280;">Smart India Hackathon 2024 - Campus Query Solution</p>
                </div>
                <div class="header-controls" style="display: flex; align-items: center; gap: 16px;">
                    <div class="language-selector" style="display: flex; align-items: center; gap: 8px; background: #f8fafc; padding: 8px 12px; border-radius: 8px; border: 1px solid #e5e7eb;">
                        <span style="font-size: 16px;">üåê</span>
                        <select onchange="changeLanguage(this.value)" id="languageSelect" style="border: none; background: transparent; font-size: 14px; color: #374151; font-weight: 500;">
                            <option value="en">English</option>
                            <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                            <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
                            <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</option>
                            <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
                            <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                            <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
                            <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
                        </select>
                    </div>
                    <div class="api-config" style="display: flex; align-items: center; gap: 8px;">
                        <button onclick="showApiConfig()" id="apiConfigBtn" class="api-config-btn" style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; border: 1px solid #e5e7eb; border-radius: 8px; background: #fef2f2; cursor: pointer; font-size: 12px; color: #dc2626;">
                            üîë <span id="apiStatus">API Key Required</span>
                        </button>
                    </div>
                    <button class="human-help-btn" style="display: flex; align-items: center; gap: 8px; padding: 8px 16px; border: 1px solid #e5e7eb; border-radius: 8px; background: white; cursor: pointer; font-size: 14px; font-weight: 500; color: #374151; transition: all 0.2s;">üìû Human Help</button>
                </div>
            </div>
            
            <!-- Messages Area -->
            <div class="messages-area" id="messagesArea">
                <div class="message bot">
                    <div class="message-content">
                        <div class="avatar bot">ü§ñ</div>
                        <div class="message-bubble bot">
                            <div class="message-meta">
                                <span class="language-tag">English</span>
                                <span class="confidence-tag">100% confident</span>
                            </div>
                            <div class="message-text" id="greetingText">Hello! I'm your multilingual campus assistant. I can help you with fees, scholarships, timetables, admissions, and other college information. You can talk to me in Hindi, English, or any of our supported regional languages!</div>
                            <div class="message-time" id="greetingTime"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="quick-actions" id="quickActions">
                <div class="quick-actions-panel">
                    <h3 class="quick-actions-title" id="quickTitle">Quick Help</h3>
                    <div class="actions-grid">
                        <button class="action-btn" onclick="sendQuickMessage('Tell me about fee structure and payment deadlines')">
                            <span class="action-icon">üí≥</span>
                            <span class="action-label" id="action1">Fee Information</span>
                        </button>
                        <button class="action-btn" onclick="sendQuickMessage('What scholarships are available for students?')">
                            <span class="action-icon">üéì</span>
                            <span class="action-label" id="action2">Scholarships</span>
                        </button>
                        <button class="action-btn" onclick="sendQuickMessage('Show me the current class timetable and schedule')">
                            <span class="action-icon">üìÖ</span>
                            <span class="action-label" id="action3">Timetable</span>
                        </button>
                        <button class="action-btn" onclick="sendQuickMessage('How do I apply for admission? What are the requirements?')">
                            <span class="action-icon">üìÑ</span>
                            <span class="action-label" id="action4">Admissions</span>
                        </button>
                        <button class="action-btn" onclick="sendQuickMessage('When are the upcoming exams and results?')">
                            <span class="action-icon">‚è∞</span>
                            <span class="action-label" id="action5">Exam Schedule</span>
                        </button>
                        <button class="action-btn" onclick="sendQuickMessage('What can you help me with? Show me all services')">
                            <span class="action-icon">‚ùì</span>
                            <span class="action-label" id="action6">General Help</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Input Area -->
            <div class="input-area">
                <div class="input-container">
                    <input type="text" id="messageInput" class="message-input" placeholder="Type your question here..." onkeypress="handleKeyPress(event)">
                    <button class="send-btn" onclick="sendMessage()">‚û§</button>
                </div>
                <p class="input-hint" id="inputHint">You can ask questions in Hindi, English, or other Indian languages</p>
            </div>
        </div>
        
        <!-- API Configuration Modal -->
        <div id="apiModal" class="api-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
            <div class="modal-content" style="background: white; border-radius: 12px; padding: 24px; max-width: 500px; width: 90%; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);">
                <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 16px; color: #111827;">OpenAI API Configuration</h3>
                <p style="font-size: 14px; color: #6b7280; margin-bottom: 16px;">Enter your OpenAI API key to enable intelligent, language-agnostic responses. Your key is stored locally and never shared.</p>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; font-size: 14px; font-weight: 500; color: #374151; margin-bottom: 6px;">API Key:</label>
                    <input type="password" id="apiKeyInput" placeholder="sk-..." style="width: 100%; padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px;">
                </div>
                <div id="apiTestResult" style="display: none; padding: 10px; border-radius: 6px; margin-bottom: 16px; font-size: 14px;"></div>
                <div style="display: flex; gap: 12px; justify-content: flex-end;">
                    <button onclick="closeApiModal()" style="padding: 8px 16px; border: 1px solid #d1d5db; background: white; border-radius: 6px; cursor: pointer;">Cancel</button>
                    <button onclick="testApiKey()" id="testApiBtn" style="padding: 8px 16px; background: #2563eb; color: white; border: none; border-radius: 6px; cursor: pointer;">Test & Save</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentLanguage = 'en';
        let sidebarExpanded = false;
        let messageCount = 1;
        let isAdminLoggedIn = false;
        let openaiApiKey = '';
        let isApiKeyValid = false;
        
        // Set initial view to student mode
        document.body.className = 'student-view';
        
        const languages = {
            en: {
                greeting: "Hello! I'm your multilingual campus assistant. I can help you with fees, scholarships, timetables, admissions, and other college information. You can talk to me in Hindi, English, or any of our supported regional languages!",
                thinking: "Processing your query...",
                quickTitle: "Quick Help",
                actions: ["Fee Information", "Scholarships", "Timetable", "Admissions", "Exam Schedule", "General Help"],
                placeholder: "Type your question here...",
                hint: "You can ask questions in Hindi, English, or other Indian languages"
            },
            hi: {
                greeting: "‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§¨‡§π‡•Å‡§≠‡§æ‡§∑‡•Ä ‡§ï‡•à‡§Ç‡§™‡§∏ ‡§Ö‡§∏‡§ø‡§∏‡•ç‡§ü‡•á‡§Ç‡§ü ‡§π‡•Ç‡§Å‡•§ ‡§Æ‡•à‡§Ç ‡§´‡•Ä‡§∏, ‡§õ‡§æ‡§§‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø, ‡§∏‡§Æ‡§Ø ‡§∏‡§æ‡§∞‡§£‡•Ä, ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§ï‡•â‡§≤‡•á‡§ú ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å‡•§ ‡§Ü‡§™ ‡§π‡§ø‡§Ç‡§¶‡•Ä, ‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•Ä ‡§Ø‡§æ ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§∏‡§Æ‡§∞‡•ç‡§•‡§ø‡§§ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•Ä‡§Ø ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§Æ‡•Å‡§ù‡§∏‡•á ‡§¨‡§æ‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç!",
                thinking: "‡§Ü‡§™‡§ï‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ï‡•ã ‡§∏‡§Æ‡§ù ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å...",
                quickTitle: "‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ",
                actions: ["‡§´‡•Ä‡§∏ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä", "‡§õ‡§æ‡§§‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø", "‡§∏‡§Æ‡§Ø ‡§∏‡§æ‡§∞‡§£‡•Ä", "‡§™‡•ç‡§∞‡§µ‡•á‡§∂", "‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§∏‡§Æ‡§Ø", "‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ"],
                placeholder: "‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§≤‡§ø‡§ñ‡•á‡§Ç...",
                hint: "‡§Ü‡§™ ‡§π‡§ø‡§Ç‡§¶‡•Ä, ‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•Ä ‡§Ø‡§æ ‡§Ö‡§®‡•ç‡§Ø ‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§≠‡§æ‡§∑‡§æ‡§ì‡§Ç ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç"
            },
            mr: {
                greeting: "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞! ‡§Æ‡•Ä ‡§§‡•Å‡§Æ‡§ö‡§æ ‡§¨‡§π‡•Å‡§≠‡§æ‡§∑‡•Ä ‡§ï‡•Ö‡§Æ‡•ç‡§™‡§∏ ‡§Ö‡§∏‡§ø‡§∏‡•ç‡§ü‡•á‡§Ç‡§ü ‡§Ü‡§π‡•á‡•§ ‡§Æ‡•Ä ‡§´‡•Ä, ‡§∂‡§ø‡§∑‡•ç‡§Ø‡§µ‡•É‡§§‡•ç‡§§‡•Ä, ‡§µ‡•á‡§≥‡§æ‡§™‡§§‡•ç‡§∞‡§ï, ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§Ü‡§£‡§ø ‡§á‡§§‡§∞ ‡§Æ‡§π‡§æ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø‡•Ä‡§® ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§Æ‡§¶‡§§ ‡§ï‡§∞‡•Ç ‡§∂‡§ï‡§§‡•ã‡•§ ‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä ‡§Æ‡§∞‡§æ‡§†‡•Ä, ‡§π‡§ø‡§Ç‡§¶‡•Ä, ‡§á‡§Ç‡§ó‡•ç‡§∞‡§ú‡•Ä ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§Ü‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§ï‡•ã‡§£‡§§‡•ç‡§Ø‡§æ‡§π‡•Ä ‡§∏‡§Æ‡§∞‡•ç‡§•‡§ø‡§§ ‡§™‡•ç‡§∞‡§æ‡§¶‡•á‡§∂‡§ø‡§ï ‡§≠‡§æ‡§∑‡•á‡§§ ‡§Æ‡§æ‡§ù‡•ç‡§Ø‡§æ‡§∂‡•Ä ‡§¨‡•ã‡§≤‡•Ç ‡§∂‡§ï‡§§‡§æ!",
                thinking: "‡§§‡•Å‡§Æ‡§ö‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∏‡§Æ‡§ú‡•Ç‡§® ‡§ò‡•á‡§§ ‡§Ü‡§π‡•á...",
                quickTitle: "‡§¶‡•ç‡§∞‡•Å‡§§ ‡§Æ‡§¶‡§§",
                actions: ["‡§´‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä", "‡§∂‡§ø‡§∑‡•ç‡§Ø‡§µ‡•É‡§§‡•ç‡§§‡•Ä", "‡§µ‡•á‡§≥‡§æ‡§™‡§§‡•ç‡§∞‡§ï", "‡§™‡•ç‡§∞‡§µ‡•á‡§∂", "‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§µ‡•á‡§≥‡§æ‡§™‡§§‡•ç‡§∞‡§ï", "‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Æ‡§¶‡§§"],
                placeholder: "‡§Ø‡•á‡§•‡•á ‡§§‡•Å‡§Æ‡§ö‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡§æ...",
                hint: "‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä ‡§Æ‡§∞‡§æ‡§†‡•Ä, ‡§π‡§ø‡§Ç‡§¶‡•Ä, ‡§á‡§Ç‡§ó‡•ç‡§∞‡§ú‡•Ä ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§á‡§§‡§∞ ‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§≠‡§æ‡§∑‡§æ‡§Ç‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§µ‡§ø‡§ö‡§æ‡§∞‡•Ç ‡§∂‡§ï‡§§‡§æ"
            },
            gu: {
                greeting: "‡™®‡™Æ‡™∏‡´ç‡™§‡´á! ‡™π‡´Å‡™Ç ‡™§‡™Æ‡™æ‡™∞‡´ã ‡™¨‡™π‡´Å‡™≠‡™æ‡™∑‡´Ä ‡™ï‡´á‡™Æ‡´ç‡™™‡™∏ ‡™∏‡™π‡™æ‡™Ø‡™ï ‡™õ‡´Å‡™Ç‡•§ ‡™π‡´Å‡™Ç ‡™´‡´Ä, ‡™∂‡™ø‡™∑‡´ç‡™Ø‡™µ‡´É‡™§‡´ç‡™§‡™ø, ‡™∏‡™Æ‡™Ø‡™™‡™§‡´ç‡™∞‡™ï, ‡™™‡´ç‡™∞‡™µ‡´á‡™∂ ‡™Ö‡™®‡´á ‡™Ö‡™®‡´ç‡™Ø ‡™ï‡´ã‡™≤‡´á‡™ú‡™®‡´Ä ‡™Æ‡™æ‡™π‡™ø‡™§‡´Ä‡™Æ‡™æ‡™Ç ‡™§‡™Æ‡™æ‡™∞‡´Ä ‡™Æ‡™¶‡™¶ ‡™ï‡™∞‡´Ä ‡™∂‡™ï‡´Å‡™Ç ‡™õ‡´Å‡™Ç‡•§ ‡™§‡™Æ‡´á ‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä, ‡™π‡™ø‡™®‡´ç‡™¶‡´Ä, ‡™Ö‡™Ç‡™ó‡´ç‡™∞‡´á‡™ú‡´Ä ‡™Ö‡™•‡™µ‡™æ ‡™Ö‡™Æ‡™æ‡™∞‡´Ä ‡™ï‡´ã‡™à‡™™‡™£ ‡™∏‡™Æ‡™∞‡´ç‡™•‡™ø‡™§ ‡™™‡´ç‡™∞‡™æ‡™¶‡´á‡™∂‡™ø‡™ï ‡™≠‡™æ‡™∑‡™æ‡™Æ‡™æ‡™Ç ‡™Æ‡™æ‡™∞‡´Ä ‡™∏‡™æ‡™•‡´á ‡™µ‡™æ‡™§ ‡™ï‡™∞‡´Ä ‡™∂‡™ï‡´ã ‡™õ‡´ã!",
                thinking: "‡™§‡™Æ‡™æ‡™∞‡™æ ‡™™‡´ç‡™∞‡™∂‡´ç‡™®‡™®‡´á ‡™∏‡™Æ‡™ú‡´Ä ‡™∞‡™π‡´ç‡™Ø‡´ã ‡™õ‡´Å‡™Ç...",
                quickTitle: "‡™ù‡™°‡™™‡´Ä ‡™Æ‡™¶‡™¶",
                actions: ["‡™´‡´Ä ‡™Æ‡™æ‡™π‡™ø‡™§‡´Ä", "‡™∂‡™ø‡™∑‡´ç‡™Ø‡™µ‡´É‡™§‡´ç‡™§‡™ø", "‡™∏‡™Æ‡™Ø‡™™‡™§‡´ç‡™∞‡™ï", "‡™™‡´ç‡™∞‡™µ‡´á‡™∂", "‡™™‡™∞‡´Ä‡™ï‡´ç‡™∑‡™æ ‡™∂‡´á‡™°‡´ç‡™Ø‡´Ç‡™≤", "‡™∏‡™æ‡™Æ‡™æ‡™®‡´ç‡™Ø ‡™Æ‡™¶‡™¶"],
                placeholder: "‡™Ö‡™π‡´Ä‡™Ç ‡™§‡™Æ‡™æ‡™∞‡´ã ‡™™‡´ç‡™∞‡™∂‡´ç‡™® ‡™≤‡™ñ‡´ã...",
                hint: "‡™§‡™Æ‡´á ‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä, ‡™π‡™ø‡™®‡´ç‡™¶‡´Ä, ‡™Ö‡™Ç‡™ó‡´ç‡™∞‡´á‡™ú‡´Ä ‡™Ö‡™•‡™µ‡™æ ‡™Ö‡™®‡´ç‡™Ø ‡™≠‡™æ‡™∞‡™§‡´Ä‡™Ø ‡™≠‡™æ‡™∑‡™æ‡™ì‡™Æ‡™æ‡™Ç ‡™™‡´ç‡™∞‡™∂‡´ç‡™®‡´ã ‡™™‡´Ç‡™õ‡´Ä ‡™∂‡™ï‡´ã ‡™õ‡´ã"
            },
            bn: {
                greeting: "‡¶®‡¶Æ‡¶∏‡ßç‡¶ï‡¶æ‡¶∞! ‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶π‡ßÅ‡¶≠‡¶æ‡¶∑‡¶ø‡¶ï ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶™‡¶æ‡¶∏ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶ï‡•§ ‡¶Ü‡¶Æ‡¶ø ‡¶´‡¶ø, ‡¶¨‡ßÉ‡¶§‡ßç‡¶§‡¶ø, ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÇ‡¶ö‡ßÄ, ‡¶≠‡¶∞‡ßç‡¶§‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶ï‡¶≤‡ßá‡¶ú ‡¶§‡¶•‡ßç‡¶Ø‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø‡•§ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ, ‡¶π‡¶ø‡¶®‡ßç‡¶¶‡¶ø, ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø ‡¶¨‡¶æ ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶Æ‡¶∞‡ßç‡¶•‡¶ø‡¶§ ‡¶Ü‡¶û‡ßç‡¶ö‡¶≤‡¶ø‡¶ï ‡¶≠‡¶æ‡¶∑‡¶æ‡¶Ø‡¶º ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®!",
                thinking: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶¨‡ßÅ‡¶ù‡¶§‡ßá ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡¶õ‡¶ø...",
                quickTitle: "‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø",
                actions: ["‡¶´‡¶ø ‡¶§‡¶•‡ßç‡¶Ø", "‡¶¨‡ßÉ‡¶§‡ßç‡¶§‡¶ø", "‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÇ‡¶ö‡ßÄ", "‡¶≠‡¶∞‡ßç‡¶§‡¶ø", "‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÇ‡¶ö‡ßÄ", "‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø"],
                placeholder: "‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶ü‡¶æ‡¶á‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®...",
                hint: "‡¶Ü‡¶™‡¶®‡¶ø ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ, ‡¶π‡¶ø‡¶®‡ßç‡¶¶‡¶ø, ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø ‡¶¨‡¶æ ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶≠‡¶æ‡¶∞‡¶§‡ßÄ‡¶Ø‡¶º ‡¶≠‡¶æ‡¶∑‡¶æ‡¶Ø‡¶º ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶ú‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶∏‡¶æ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®"
            },
            ta: {
                greeting: "‡Æµ‡Æ£‡Æï‡Øç‡Æï‡ÆÆ‡Øç! ‡Æ®‡Ææ‡Æ©‡Øç ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Æ©‡Øç‡ÆÆ‡Øä‡Æ¥‡Æø ‡Æµ‡Æ≥‡Ææ‡Æï ‡Æâ‡Æ§‡Æµ‡Æø‡ÆØ‡Ææ‡Æ≥‡Æ∞‡Øç. ‡Æï‡Æü‡Øç‡Æü‡Æ£‡ÆÆ‡Øç, ‡Æâ‡Æ§‡Æµ‡Æø‡Æ§‡Øç‡Æ§‡Øä‡Æï‡Øà, ‡Æ®‡Øá‡Æ∞ ‡ÆÖ‡Æü‡Øç‡Æü‡Æµ‡Æ£‡Øà, ‡Æö‡Øá‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Øà ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Æø‡Æ± ‡Æï‡Æ≤‡Øç‡Æ≤‡ØÇ‡Æ∞‡Æø ‡Æ§‡Æï‡Æµ‡Æ≤‡Øç‡Æï‡Æ≥‡Æø‡Æ≤‡Øç ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æâ‡Æ§‡Æµ ‡ÆÆ‡ØÅ‡Æü‡Æø‡ÆØ‡ØÅ‡ÆÆ‡Øç. ‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç, ‡Æá‡Æ®‡Øç‡Æ§‡Æø, ‡ÆÜ‡Æô‡Øç‡Æï‡Æø‡Æ≤‡ÆÆ‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æé‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÜ‡Æ§‡Æ∞‡Æµ‡Æ≥‡Æø‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Æø‡Æ∞‡Ææ‡Æ®‡Øç‡Æ§‡Æø‡ÆØ ‡ÆÆ‡Øä‡Æ¥‡Æø‡Æï‡Æ≥‡Æø‡Æ≤‡Øç ‡Æé‡Æ©‡Øç‡Æ©‡ØÅ‡Æü‡Æ©‡Øç ‡Æ™‡Øá‡Æö‡Æ≤‡Ææ‡ÆÆ‡Øç!",
                thinking: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡ÆØ‡Øà‡Æ™‡Øç ‡Æ™‡ØÅ‡Æ∞‡Æø‡Æ®‡Øç‡Æ§‡ØÅ ‡Æï‡Øä‡Æ≥‡Øç‡Æï‡Æø‡Æ±‡Øá‡Æ©‡Øç...",
                quickTitle: "‡Æµ‡Æø‡Æ∞‡Øà‡Æµ‡ØÅ ‡Æâ‡Æ§‡Æµ‡Æø",
                actions: ["‡Æï‡Æü‡Øç‡Æü‡Æ£ ‡Æ§‡Æï‡Æµ‡Æ≤‡Øç", "‡Æâ‡Æ§‡Æµ‡Æø‡Æ§‡Øç‡Æ§‡Øä‡Æï‡Øà", "‡Æ®‡Øá‡Æ∞ ‡ÆÖ‡Æü‡Øç‡Æü‡Æµ‡Æ£‡Øà", "‡Æö‡Øá‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Øà", "‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ ‡ÆÖ‡Æü‡Øç‡Æü‡Æµ‡Æ£‡Øà", "‡Æ™‡Øä‡Æ§‡ØÅ ‡Æâ‡Æ§‡Æµ‡Æø"],
                placeholder: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡ÆØ‡Øà ‡Æá‡Æô‡Øç‡Æï‡Øá ‡Æ§‡Æü‡Øç‡Æü‡Æö‡Øç‡Æö‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç...",
                hint: "‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç, ‡Æá‡Æ®‡Øç‡Æ§‡Æø, ‡ÆÜ‡Æô‡Øç‡Æï‡Æø‡Æ≤‡ÆÆ‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ™‡Æø‡Æ± ‡Æá‡Æ®‡Øç‡Æ§‡Æø‡ÆØ ‡ÆÆ‡Øä‡Æ¥‡Æø‡Æï‡Æ≥‡Æø‡Æ≤‡Øç ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡Æï‡Æ≥‡Øç ‡Æï‡Øá‡Æü‡Øç‡Æï‡Æ≤‡Ææ‡ÆÆ‡Øç"
            },
            te: {
                greeting: "‡∞®‡∞Æ‡∞∏‡±ç‡∞ï‡∞æ‡∞∞‡∞Ç! ‡∞®‡±á‡∞®‡±Å ‡∞Æ‡±Ä ‡∞¨‡∞π‡±Å‡∞≠‡∞æ‡∞∑‡∞æ ‡∞ï‡±ç‡∞Ø‡∞æ‡∞Ç‡∞™‡∞∏‡±ç ‡∞∏‡∞π‡∞æ‡∞Ø‡∞ï‡±Å‡∞°‡∞®‡±Å‡•§ ‡∞´‡±Ä‡∞ú‡±Å‡∞≤‡±Å, ‡∞∏‡±ç‡∞ï‡∞æ‡∞≤‡∞∞‡±ç‚Äå‡∞∑‡∞ø‡∞™‡±ç‚Äå‡∞≤‡±Å, ‡∞ü‡±à‡∞Æ‡±ç‚Äå‡∞ü‡±á‡∞¨‡±Å‡∞≤‡±ç‚Äå‡∞≤‡±Å, ‡∞Ö‡∞°‡±ç‡∞Æ‡∞ø‡∞∑‡∞®‡±ç‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞á‡∞§‡∞∞ ‡∞ï‡∞æ‡∞≤‡±á‡∞ú‡±Ä ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç‡∞≤‡±ã ‡∞Æ‡±Ä‡∞ï‡±Å ‡∞∏‡∞π‡∞æ‡∞Ø‡∞Ç ‡∞ö‡±á‡∞Ø‡∞ó‡∞≤‡∞®‡±Å‡•§ ‡∞Æ‡±Ä‡∞∞‡±Å ‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å, ‡∞π‡∞ø‡∞Ç‡∞¶‡±Ä, ‡∞á‡∞Ç‡∞ó‡±ç‡∞≤‡±Ä‡∞∑‡±ç ‡∞≤‡±á‡∞¶‡∞æ ‡∞Æ‡∞æ ‡∞Æ‡∞¶‡±ç‡∞¶‡∞§‡∞ø‡∞ö‡±ç‡∞ö‡±á ‡∞™‡±ç‡∞∞‡∞æ‡∞Ç‡∞§‡±Ä‡∞Ø ‡∞≠‡∞æ‡∞∑‡∞≤‡∞≤‡±ã ‡∞®‡∞æ‡∞§‡±ã ‡∞Æ‡∞æ‡∞ü‡±ç‡∞≤‡∞æ‡∞°‡∞µ‡∞ö‡±ç‡∞ö‡±Å!",
                thinking: "‡∞Æ‡±Ä ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞®‡∞®‡±Å ‡∞Ö‡∞∞‡±ç‡∞•‡∞Ç ‡∞ö‡±á‡∞∏‡±Å‡∞ï‡±Å‡∞Ç‡∞ü‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞®‡±Å...",
                quickTitle: "‡∞§‡±ç‡∞µ‡∞∞‡∞ø‡∞§ ‡∞∏‡∞π‡∞æ‡∞Ø‡∞Ç",
                actions: ["‡∞´‡±Ä‡∞ú‡±Å ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç", "‡∞∏‡±ç‡∞ï‡∞æ‡∞≤‡∞∞‡±ç‚Äå‡∞∑‡∞ø‡∞™‡±ç‚Äå‡∞≤‡±Å", "‡∞ü‡±à‡∞Æ‡±ç‚Äå‡∞ü‡±á‡∞¨‡±Å‡∞≤‡±ç", "‡∞Ö‡∞°‡±ç‡∞Æ‡∞ø‡∞∑‡∞®‡±ç‡∞≤‡±Å", "‡∞™‡∞∞‡±Ä‡∞ï‡±ç‡∞∑ ‡∞∑‡±Ü‡∞°‡±ç‡∞Ø‡±Ç‡∞≤‡±ç", "‡∞∏‡∞æ‡∞ß‡∞æ‡∞∞‡∞£ ‡∞∏‡∞π‡∞æ‡∞Ø‡∞Ç"],
                placeholder: "‡∞Æ‡±Ä ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞®‡∞®‡±Å ‡∞á‡∞ï‡±ç‡∞ï‡∞° ‡∞ü‡±à‡∞™‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø...",
                hint: "‡∞Æ‡±Ä‡∞∞‡±Å ‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å, ‡∞π‡∞ø‡∞Ç‡∞¶‡±Ä, ‡∞á‡∞Ç‡∞ó‡±ç‡∞≤‡±Ä‡∞∑‡±ç ‡∞≤‡±á‡∞¶‡∞æ ‡∞á‡∞§‡∞∞ ‡∞≠‡∞æ‡∞∞‡∞§‡±Ä‡∞Ø ‡∞≠‡∞æ‡∞∑‡∞≤‡∞≤‡±ã ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞®‡∞≤‡±Å ‡∞Ö‡∞°‡∞ó‡∞µ‡∞ö‡±ç‡∞ö‡±Å"
            },
            kn: {
                greeting: "‡≤®‡≤Æ‡≤∏‡≥ç‡≤ï‡≤æ‡≤∞! ‡≤®‡≤æ‡≤®‡≥Å ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤¨‡≤π‡≥Å‡≤≠‡≤æ‡≤∑‡≤æ ‡≤ï‡≥ç‡≤Ø‡≤æ‡≤Ç‡≤™‡≤∏‡≥ç ‡≤∏‡≤π‡≤æ‡≤Ø‡≤ï. ‡≤∂‡≥Å‡≤≤‡≥ç‡≤ï, ‡≤µ‡≤ø‡≤¶‡≥ç‡≤Ø‡≤æ‡≤∞‡≥ç‡≤•‡≤ø‡≤µ‡≥á‡≤§‡≤®, ‡≤µ‡≥á‡≤≥‡≤æ‡≤™‡≤ü‡≥ç‡≤ü‡≤ø, ‡≤™‡≥ç‡≤∞‡≤µ‡≥á‡≤∂ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤á‡≤§‡≤∞ ‡≤ï‡≤æ‡≤≤‡≥á‡≤ú‡≥Å ‡≤Æ‡≤æ‡≤π‡≤ø‡≤§‡≤ø‡≤Ø‡≤≤‡≥ç‡≤≤‡≤ø ‡≤®‡≤ø‡≤Æ‡≤ó‡≥Ü ‡≤∏‡≤π‡≤æ‡≤Ø ‡≤Æ‡≤æ‡≤°‡≤¨‡≤≤‡≥ç‡≤≤‡≥Ü‡•§ ‡≤®‡≥Ä‡≤µ‡≥Å ‡≤ï‡≤®‡≥ç‡≤®‡≤°, ‡≤π‡≤ø‡≤Ç‡≤¶‡≤ø, ‡≤á‡≤Ç‡≤ó‡≥ç‡≤≤‡≤ø‡≤∑‡≥ç ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤®‡≤Æ‡≥ç‡≤Æ ‡≤¨‡≥Ü‡≤Ç‡≤¨‡≤≤‡≤ø‡≤§ ‡≤™‡≥ç‡≤∞‡≤æ‡≤¶‡≥á‡≤∂‡≤ø‡≤ï ‡≤≠‡≤æ‡≤∑‡≥Ü‡≤ó‡≤≥‡≤≤‡≥ç‡≤≤‡≤ø ‡≤®‡≤®‡≥ç‡≤®‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤Æ‡≤æ‡≤§‡≤®‡≤æ‡≤°‡≤¨‡≤π‡≥Å‡≤¶‡≥Å!",
                thinking: "‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤™‡≥ç‡≤∞‡≤∂‡≥ç‡≤®‡≥Ü‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤Ö‡≤∞‡≥ç‡≤•‡≤Æ‡≤æ‡≤°‡≤ø‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≥á‡≤®‡≥Ü...",
                quickTitle: "‡≤§‡≥ç‡≤µ‡≤∞‡≤ø‡≤§ ‡≤∏‡≤π‡≤æ‡≤Ø",
                actions: ["‡≤∂‡≥Å‡≤≤‡≥ç‡≤ï ‡≤Æ‡≤æ‡≤π‡≤ø‡≤§‡≤ø", "‡≤µ‡≤ø‡≤¶‡≥ç‡≤Ø‡≤æ‡≤∞‡≥ç‡≤•‡≤ø‡≤µ‡≥á‡≤§‡≤®", "‡≤µ‡≥á‡≤≥‡≤æ‡≤™‡≤ü‡≥ç‡≤ü‡≤ø", "‡≤™‡≥ç‡≤∞‡≤µ‡≥á‡≤∂", "‡≤™‡≤∞‡≥Ä‡≤ï‡≥ç‡≤∑‡≤æ ‡≤µ‡≥á‡≤≥‡≤æ‡≤™‡≤ü‡≥ç‡≤ü‡≤ø", "‡≤∏‡≤æ‡≤Æ‡≤æ‡≤®‡≥ç‡≤Ø ‡≤∏‡≤π‡≤æ‡≤Ø"],
                placeholder: "‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤™‡≥ç‡≤∞‡≤∂‡≥ç‡≤®‡≥Ü‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤á‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ü‡≥à‡≤™‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø...",
                hint: "‡≤®‡≥Ä‡≤µ‡≥Å ‡≤ï‡≤®‡≥ç‡≤®‡≤°, ‡≤π‡≤ø‡≤Ç‡≤¶‡≤ø, ‡≤á‡≤Ç‡≤ó‡≥ç‡≤≤‡≤ø‡≤∑‡≥ç ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤á‡≤§‡≤∞ ‡≤≠‡≤æ‡≤∞‡≤§‡≥Ä‡≤Ø ‡≤≠‡≤æ‡≤∑‡≥Ü‡≤ó‡≤≥‡≤≤‡≥ç‡≤≤‡≤ø ‡≤™‡≥ç‡≤∞‡≤∂‡≥ç‡≤®‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤ï‡≥á‡≤≥‡≤¨‡≤π‡≥Å‡≤¶‡≥Å"
            }
        };

        function showPage(page) {
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            
            // Add active class to clicked nav item
            event.target.classList.add('active');
            
            // For now, just keep the chat interface visible
            // In future, we can add actual page switching here
            console.log('Switching to page:', page);
        }
        
        function showApiConfig() {
            document.getElementById('apiModal').style.display = 'flex';
        }
        
        function closeApiModal() {
            document.getElementById('apiModal').style.display = 'none';
        }
        
        async function testApiKey() {
            const apiKey = document.getElementById('apiKeyInput').value.trim();
            const testBtn = document.getElementById('testApiBtn');
            const resultDiv = document.getElementById('apiTestResult');
            
            if (!apiKey) {
                showApiResult('Please enter an API key', 'error');
                return;
            }
            
            testBtn.textContent = 'Testing...';
            testBtn.disabled = true;
            
            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [{ role: 'user', content: 'Hello' }],
                        max_tokens: 5
                    })
                });
                
                if (response.ok) {
                    openaiApiKey = apiKey;
                    isApiKeyValid = true;
                    localStorage.setItem('openai_api_key', apiKey);
                    updateApiStatus(true);
                    showApiResult('‚úÖ API key verified successfully!', 'success');
                    setTimeout(() => {
                        closeApiModal();
                    }, 1500);
                } else {
                    throw new Error('Invalid API key');
                }
            } catch (error) {
                showApiResult('‚ùå Invalid API key. Please check and try again.', 'error');
            } finally {
                testBtn.textContent = 'Test & Save';
                testBtn.disabled = false;
            }
        }
        
        function showApiResult(message, type) {
            const resultDiv = document.getElementById('apiTestResult');
            resultDiv.style.display = 'block';
            resultDiv.textContent = message;
            resultDiv.style.background = type === 'success' ? '#f0fdf4' : '#fef2f2';
            resultDiv.style.color = type === 'success' ? '#166534' : '#dc2626';
            resultDiv.style.border = `1px solid ${type === 'success' ? '#bbf7d0' : '#fecaca'}`;
        }
        
        function updateApiStatus(isValid) {
            const statusSpan = document.getElementById('apiStatus');
            const configBtn = document.getElementById('apiConfigBtn');
            
            if (isValid) {
                statusSpan.textContent = 'API Connected';
                configBtn.style.background = '#f0fdf4';
                configBtn.style.color = '#166534';
                configBtn.style.borderColor = '#bbf7d0';
            } else {
                statusSpan.textContent = 'API Key Required';
                configBtn.style.background = '#fef2f2';
                configBtn.style.color = '#dc2626';
                configBtn.style.borderColor = '#fecaca';
            }
        }
        
        async function getOpenAIResponse(userMessage, detectedLanguage) {
            if (!isApiKeyValid || !openaiApiKey) {
                return "Please configure your OpenAI API key to enable intelligent responses.";
            }
            
            try {
                const systemPrompt = `You are a helpful campus assistant chatbot. The user's message may be in mixed languages including English, Hindi, Marathi, Gujarati, Bengali, Tamil, Telugu, or Kannada. 
                
User's preferred response language: ${getLanguageName(currentLanguage)}
                
Provide helpful responses about:
                - College fees and payment information
                - Scholarships and financial aid
                - Academic timetables and schedules
                - Admission procedures
                - Exam schedules and results
                - General college information
                
Always respond in the user's preferred language (${getLanguageName(currentLanguage)}). Format important information like fees, dates, and links with appropriate emphasis.`;
                
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${openaiApiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [
                            { role: 'system', content: systemPrompt },
                            { role: 'user', content: userMessage }
                        ],
                        max_tokens: 300,
                        temperature: 0.7
                    })
                });
                
                if (!response.ok) {
                    throw new Error('API request failed');
                }
                
                const data = await response.json();
                return data.choices[0].message.content.trim();
                
            } catch (error) {
                console.error('OpenAI API error:', error);
                return generateResponse(userMessage); // Fallback to local responses
            }
        }
        
        function getLanguageName(langCode) {
            const langNames = {
                'en': 'English',
                'hi': 'Hindi (‡§π‡§ø‡§Ç‡§¶‡•Ä)',
                'mr': 'Marathi (‡§Æ‡§∞‡§æ‡§†‡•Ä)',
                'gu': 'Gujarati (‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä)',
                'bn': 'Bengali (‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ)',
                'ta': 'Tamil (‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç)',
                'te': 'Telugu (‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å)',
                'kn': 'Kannada (‡≤ï‡≤®‡≥ç‡≤®‡≤°)'
            };
            return langNames[langCode] || 'English';
        }

        // Enhanced Language Processor with Intent Recognition
        class LanguageProcessor {
            constructor() {
                this.languagePatterns = {
                    hi: /[\u0900-\u097F]/,
                    mr: /[\u0900-\u097F]/,
                    gu: /[\u0A80-\u0AFF]/,
                    bn: /[\u0980-\u09FF]/,
                    ta: /[\u0B80-\u0BFF]/,
                    te: /[\u0C00-\u0C7F]/,
                    kn: /[\u0C80-\u0CFF]/
                };
                this.contextMemory = new Map();
                this.responseGenerator = new ResponseGenerator();
            }

            detectLanguage(text) {
                let maxMatches = 0;
                let detectedLang = 'en';
                
                for (const [lang, pattern] of Object.entries(this.languagePatterns)) {
                    const matches = (text.match(pattern) || []).length;
                    if (matches > maxMatches) {
                        maxMatches = matches;
                        detectedLang = lang;
                    }
                }
                
                return detectedLang;
            }

            classifyIntent(message, language) {
                const intents = {
                    fees: {
                        keywords: {
                            en: ['fee', 'fees', 'payment', 'cost', 'amount', 'money', 'pay'],
                            hi: ['‡§∂‡•Å‡§≤‡•ç‡§ï', '‡§´‡•Ä‡§∏', '‡§™‡•à‡§∏‡§æ', '‡§≠‡•Å‡§ó‡§§‡§æ‡§®'],
                            mr: ['‡§∂‡•Å‡§≤‡•ç‡§ï', '‡§´‡•Ä', '‡§™‡•à‡§∏‡•á', '‡§™‡•á‡§Æ‡•á‡§Ç‡§ü']
                        }
                    },
                    scholarship: {
                        keywords: {
                            en: ['scholarship', 'grant', 'financial aid', 'stipend'],
                            hi: ['‡§õ‡§æ‡§§‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø', '‡§Ö‡§®‡•Å‡§¶‡§æ‡§®'],
                            mr: ['‡§∂‡§ø‡§∑‡•ç‡§Ø‡§µ‡•É‡§§‡•ç‡§§‡•Ä', '‡§Ö‡§®‡•Å‡§¶‡§æ‡§®']
                        }
                    }
                };
                
                const messageLower = message.toLowerCase();
                const scores = {};
                
                for (const [intentName, intentData] of Object.entries(intents)) {
                    const keywords = intentData.keywords[language] || intentData.keywords.en;
                    let score = 0;
                    
                    keywords.forEach(keyword => {
                        if (messageLower.includes(keyword.toLowerCase())) {
                            score += 1;
                        }
                    });
                    
                    scores[intentName] = score;
                }
                
                const bestIntent = Object.entries(scores).sort((a, b) => b[1] - a[1])[0];
                
                if (bestIntent[1] > 0) {
                    return {
                        intent: bestIntent[0],
                        confidence: Math.min(bestIntent[1] / 3, 1)
                    };
                }
                
                return { intent: 'general', confidence: 0.5 };
            }

            async processMessage(message, userId = 'default') {
                const detectedLang = this.detectLanguage(message);
                const context = this.getContext(userId);
                const intent = this.classifyIntent(message, detectedLang);
                
                this.updateContext(userId, {
                    message,
                    language: detectedLang,
                    intent: intent,
                    timestamp: Date.now()
                });

                return {
                    originalMessage: message,
                    detectedLanguage: detectedLang,
                    intent: intent,
                    context: context,
                    confidence: intent.confidence
                };
            }

            getContext(userId) {
                return this.contextMemory.get(userId) || [];
            }

            updateContext(userId, messageData) {
                const context = this.getContext(userId);
                context.push(messageData);
                
                if (context.length > 10) {
                    context.shift();
                }
                
                this.contextMemory.set(userId, context);
            }
        }
        
        // Response Generator
        class ResponseGenerator {
            constructor() {
                this.responses = {
                    fees: {
                        en: "**Fee Information**: Tuition fees are ‚Çπ50,000 per semester. Payment deadline is 15th of each month. You can pay online through the college portal or visit the accounts office.",
                        hi: "**‡§´‡•Ä‡§∏ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä**: ‡§ü‡•ç‡§Ø‡•Ç‡§∂‡§® ‡§´‡•Ä‡§∏ ‡§™‡•ç‡§∞‡§§‡§ø ‡§∏‡•á‡§Æ‡•á‡§∏‡•ç‡§ü‡§∞ ‚Çπ50,000 ‡§π‡•à‡•§ ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ï‡•Ä ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§π‡§∞ ‡§Æ‡§π‡•Ä‡§®‡•á ‡§ï‡•Ä 15 ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§π‡•à‡•§",
                        mr: "**‡§´‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä**: ‡§∂‡§ø‡§ï‡•ç‡§∑‡§£ ‡§∂‡•Å‡§≤‡•ç‡§ï ‡§™‡•ç‡§∞‡§§‡§ø ‡§∏‡§§‡•ç‡§∞ ‚Çπ50,000 ‡§Ü‡§π‡•á‡•§ ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü‡§ö‡•Ä ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§¶‡§∞ ‡§Æ‡§π‡§ø‡§®‡•ç‡§Ø‡§æ‡§ö‡•ç‡§Ø‡§æ 15 ‡§§‡§æ‡§∞‡§ñ‡•á‡§≤‡§æ ‡§Ü‡§π‡•á‡•§"
                    },
                    scholarship: {
                        en: "**Scholarship Information**: Merit-based scholarships available for students with 85%+ marks. Need-based scholarships for annual family income below ‚Çπ2 lakhs. Application deadline: March 31st.",
                        hi: "**‡§õ‡§æ‡§§‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä**: 85%+ ‡§Ö‡§Ç‡§ï ‡§µ‡§æ‡§≤‡•á ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡•á‡§ß‡§æ ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§õ‡§æ‡§§‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§â‡§™‡§≤‡§¨‡•ç‡§ß‡•§",
                        mr: "**‡§∂‡§ø‡§∑‡•ç‡§Ø‡§µ‡•É‡§§‡•ç‡§§‡•Ä‡§ö‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä**: 85%+ ‡§ó‡•Å‡§£ ‡§Ö‡§∏‡§≤‡•á‡§≤‡•ç‡§Ø‡§æ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∂‡§ø‡§∑‡•ç‡§Ø‡§µ‡•É‡§§‡•ç‡§§‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß‡•§"
                    },
                    general: {
                        en: "I'm here to help with information about fees, scholarships, timetables, admissions, exams, and other college-related queries. Please feel free to ask specific questions!",
                        hi: "‡§Æ‡•à‡§Ç ‡§´‡•Ä‡§∏, ‡§õ‡§æ‡§§‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø, ‡§∏‡§Æ‡§Ø ‡§∏‡§æ‡§∞‡§£‡•Ä, ‡§™‡•ç‡§∞‡§µ‡•á‡§∂, ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§ï‡•â‡§≤‡•á‡§ú ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡•Ä ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π‡§æ‡§Å ‡§π‡•Ç‡§Å‡•§",
                        mr: "‡§Æ‡•Ä ‡§´‡•Ä, ‡§∂‡§ø‡§∑‡•ç‡§Ø‡§µ‡•É‡§§‡•ç‡§§‡•Ä, ‡§µ‡•á‡§≥‡§æ‡§™‡§§‡•ç‡§∞‡§ï, ‡§™‡•ç‡§∞‡§µ‡•á‡§∂, ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§Ü‡§£‡§ø ‡§á‡§§‡§∞ ‡§Æ‡§π‡§æ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø‡•Ä‡§® ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡§æ‡§Ç‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§Æ‡§¶‡§§ ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§Ø‡•á‡§•‡•á ‡§Ü‡§π‡•á‡•§"
                    }
                };
            }
            
            generateResponse(intent, language, context = []) {
                const intentResponses = this.responses[intent] || this.responses.general;
                return intentResponses[language] || intentResponses.en;
            }
        }

        // Initialize enhanced language processor
        const languageProcessor = new LanguageProcessor();

        // Voice Interface System
        class VoiceInterface {
            constructor() {
                this.recognition = null;
                this.synthesis = window.speechSynthesis;
                this.isListening = false;
                this.isSupported = 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window;
                
                if (this.isSupported) {
                    this.initSpeechRecognition();
                }
            }

            initSpeechRecognition() {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                this.recognition = new SpeechRecognition();
                
                this.recognition.continuous = false;
                this.recognition.interimResults = false;
                this.recognition.maxAlternatives = 1;
                
                this.updateLanguage(currentLanguage);
                
                this.recognition.onstart = () => {
                    this.isListening = true;
                    this.updateVoiceButton(true);
                };
                
                this.recognition.onend = () => {
                    this.isListening = false;
                    this.updateVoiceButton(false);
                };
                
                this.recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('messageInput').value = transcript;
                    sendMessage();
                };
                
                this.recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                    this.isListening = false;
                    this.updateVoiceButton(false);
                };
            }

            updateLanguage(langCode) {
                if (!this.recognition) return;
                
                const speechLangMap = {
                    'en': 'en-IN',
                    'hi': 'hi-IN',
                    'mr': 'mr-IN',
                    'gu': 'gu-IN',
                    'bn': 'bn-IN',
                    'ta': 'ta-IN',
                    'te': 'te-IN',
                    'kn': 'kn-IN'
                };
                
                this.recognition.lang = speechLangMap[langCode] || 'en-IN';
            }

            toggleListening() {
                if (!this.isSupported) {
                    alert('Voice input is not supported in your browser. Please use Chrome or Edge.');
                    return;
                }
                
                if (this.isListening) {
                    this.recognition.stop();
                } else {
                    this.recognition.start();
                }
            }

            speak(text, language = currentLanguage) {
                if (!this.synthesis) return;
                
                this.synthesis.cancel();
                
                const utterance = new SpeechSynthesisUtterance(text);
                
                const voices = this.synthesis.getVoices();
                const languageVoice = voices.find(voice => 
                    voice.lang.startsWith(language === 'en' ? 'en' : 'hi')
                );
                
                if (languageVoice) {
                    utterance.voice = languageVoice;
                }
                
                utterance.rate = 0.9;
                utterance.pitch = 1;
                utterance.volume = 0.8;
                
                this.synthesis.speak(utterance);
            }

            updateVoiceButton(isListening) {
                const voiceBtn = document.getElementById('voiceBtn');
                if (voiceBtn) {
                    if (isListening) {
                        voiceBtn.innerHTML = 'üî¥ Listening...';
                        voiceBtn.style.background = '#fef2f2';
                        voiceBtn.style.borderColor = '#fecaca';
                        voiceBtn.style.color = '#dc2626';
                    } else {
                        voiceBtn.innerHTML = 'üé§ Voice';
                        voiceBtn.style.background = 'white';
                        voiceBtn.style.borderColor = '#e5e7eb';
                        voiceBtn.style.color = '#374151';
                    }
                }
            }
        }

        // Initialize voice interface
        const voiceInterface = new VoiceInterface();

        // Accessibility Manager
        class AccessibilityManager {
            constructor() {
                this.screenReaderSupport = false;
                this.highContrastMode = false;
                this.largeTextMode = false;
                this.reducedMotion = false;
                this.initializeAccessibility();
            }

            initializeAccessibility() {
                this.detectScreenReader();
                this.setupKeyboardNavigation();
                this.setupHighContrastMode();
                this.setupReducedMotion();
                this.setupLiveRegions();
            }

            detectScreenReader() {
                this.screenReaderSupport = !!(navigator.userAgent.includes('NVDA') ||
                    navigator.userAgent.includes('JAWS') ||
                    window.speechSynthesis);
                
                if (this.screenReaderSupport) {
                    document.body.classList.add('screen-reader-active');
                    this.announceToScreenReader('Campus Assistant loaded. Screen reader support enabled.');
                }
            }

            setupKeyboardNavigation() {
                document.addEventListener('keydown', (event) => {
                    switch (event.key) {
                        case 'Escape':
                            this.handleEscape();
                            break;
                        case 'F6':
                            this.handleRegionNavigation(event);
                            break;
                    }
                });
            }

            setupHighContrastMode() {
                const prefersHighContrast = window.matchMedia('(prefers-contrast: high)').matches;
                if (prefersHighContrast) {
                    this.enableHighContrastMode();
                }
                
                window.matchMedia('(prefers-contrast: high)').addListener((e) => {
                    if (e.matches) {
                        this.enableHighContrastMode();
                    } else {
                        this.disableHighContrastMode();
                    }
                });
            }

            setupReducedMotion() {
                const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                if (prefersReducedMotion) {
                    this.enableReducedMotion();
                }
            }

            setupLiveRegions() {
                // Live regions are already in HTML
            }

            enableHighContrastMode() {
                this.highContrastMode = true;
                document.body.classList.add('high-contrast');
                this.announceToScreenReader('High contrast mode enabled');
            }

            disableHighContrastMode() {
                this.highContrastMode = false;
                document.body.classList.remove('high-contrast');
            }

            enableReducedMotion() {
                this.reducedMotion = true;
                document.body.classList.add('reduced-motion');
            }

            handleEscape() {
                const modal = document.querySelector('#apiModal:not(.hidden)');
                if (modal && modal.style.display !== 'none') {
                    closeApiModal();
                    this.announceToScreenReader('Dialog closed');
                }
            }

            announceToScreenReader(message, urgent = false) {
                const liveRegionId = urgent ? 'assertive-live-region' : 'live-region';
                const liveRegion = document.getElementById(liveRegionId);
                
                if (liveRegion) {
                    liveRegion.textContent = message;
                    setTimeout(() => {
                        liveRegion.textContent = '';
                    }, 1000);
                }
            }

            toggleLargeTextMode() {
                this.largeTextMode = !this.largeTextMode;
                
                if (this.largeTextMode) {
                    document.body.classList.add('large-text');
                    this.announceToScreenReader('Large text mode enabled');
                } else {
                    document.body.classList.remove('large-text');
                    this.announceToScreenReader('Large text mode disabled');
                }
            }
        }

        // Initialize accessibility manager
        const accessibilityManager = new AccessibilityManager();

        function toggleVoiceInput() {
            voiceInterface.toggleListening();
        }
        document.getElementById('greetingTime').textContent = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        
        // Enhanced sendMessage function with multilingual processing
        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            if (!message) return;
            
            input.value = '';
            addMessage(message, 'user');
            
            // Show typing indicator
            showTypingIndicator();
            
            try {
                // Process with language processor
                const processed = await languageProcessor.processMessage(message);
                
                let response;
                if (isApiKeyValid) {
                    // Use OpenAI for intelligent response
                    response = await getOpenAIResponse(message, processed.detectedLanguage);
                } else {
                    // Use local response generation
                    response = languageProcessor.responseGenerator.generateResponse(
                        processed.intent.intent, 
                        currentLanguage, 
                        processed.context
                    );
                }
                
                // Add bot response with language info
                hideTypingIndicator();
                addMessage(response, 'bot', {
                    language: processed.detectedLanguage,
                    confidence: processed.intent.confidence,
                    intent: processed.intent.intent
                });
                
            } catch (error) {
                hideTypingIndicator();
                addMessage('Sorry, I encountered an error. Please try again.', 'bot');
                console.error('Message processing error:', error);
            }
        }
        
        // Enhanced addMessage function
        function addMessage(text, sender, metadata = {}) {
            const messagesArea = document.getElementById('messagesArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            const languageName = getLanguageName(metadata.language || currentLanguage);
            
            messageDiv.innerHTML = `
                <div class="message-content">
                    <div class="avatar ${sender}">${sender === 'bot' ? 'ü§ñ' : 'üë§'}</div>
                    <div class="message-bubble ${sender}">
                        ${sender === 'bot' ? `
                        <div class="message-meta">
                            <span class="language-tag">${languageName}</span>
                            ${metadata.confidence ? `<span class="confidence-tag">${Math.round(metadata.confidence * 100)}% confident</span>` : ''}
                        </div>` : ''}
                        <div class="message-text">${formatBotResponse(text)}</div>
                        <div class="message-time">${time}</div>
                    </div>
                </div>
            `;
            
            messagesArea.appendChild(messageDiv);
            messagesArea.scrollTop = messagesArea.scrollHeight;
            
            // Speak response if voice is enabled and it's a bot message
            if (sender === 'bot' && voiceInterface) {
                setTimeout(() => voiceInterface.speak(text, currentLanguage), 500);
            }
        }
        
        // Format bot responses with emphasis
        function formatBotResponse(text) {
            return text
                .replace(/(‚Çπ[\d,]+)/g, '<span class="fee-amount">$1</span>')
                .replace(/(\d{1,2}[-/]\d{1,2}[-/]\d{2,4})/g, '<span class="deadline">$1</span>')
                .replace(/(portal|website|gov\.in)/gi, '<span class="portal-link">$1</span>')
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        }
        
        function showTypingIndicator() {
            const messagesArea = document.getElementById('messagesArea');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot loading';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="message-content">
                    <div class="avatar bot">ü§ñ</div>
                    <div class="loading-bubble">
                        <div class="loading-content">
                            <div class="spinner"></div>
                            <span id="thinkingText">${languages[currentLanguage]?.thinking || 'Processing your query...'}</span>
                        </div>
                    </div>
                </div>
            `;
            messagesArea.appendChild(typingDiv);
            messagesArea.scrollTop = messagesArea.scrollHeight;
        }
        
        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }
        
        // Initialize API
        async function initializeAPI() {
            const storedKey = localStorage.getItem('openai_api_key');
            if (storedKey) {
                openaiApiKey = storedKey;
                isApiKeyValid = true;
                updateApiStatus(true);
            }
        }
        
        initializeAPI();
        
        // Voice interface integration
        function changeLanguage(language) {
            currentLanguage = language;
            updateUI();
            if (voiceInterface) {
                voiceInterface.updateLanguage(language);
            }
        }
    </script>
</body>
</html>