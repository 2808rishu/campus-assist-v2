<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Assist v2.0 - Multilingual Campus Chatbot | SIH 2024</title>
    <meta name="description" content="Smart India Hackathon 2024 - Multilingual Campus Assistant for student queries in 8 Indian languages">
    <meta name="keywords" content="Smart India Hackathon, SIH 2024, Campus Assistant, Multilingual Chatbot, Hindi, English, Student Queries">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéì</text></svg>">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f8fafc; }
        .chat-container { height: 100vh; display: flex; background: #f3f4f6; }
        .sidebar { background: white; border-right: 1px solid #e5e7eb; transition: all 0.3s; width: 64px; }
        .sidebar.expanded { width: 256px; }
        .sidebar-header { padding: 16px; display: flex; align-items: center; gap: 12px; }
        .menu-btn { padding: 8px; border: none; background: none; border-radius: 8px; cursor: pointer; }
        .menu-btn:hover { background: #f3f4f6; }
        .nav-item { width: 100%; display: flex; align-items: center; gap: 12px; padding: 12px; margin: 4px 8px; border: none; background: none; border-radius: 8px; cursor: pointer; color: #6b7280; }
        .nav-item.active { background: #eff6ff; color: #2563eb; }
        .nav-item:hover { background: #f3f4f6; }
        .main-chat { flex: 1; display: flex; flex-direction: column; }
        .chat-header { background: white; border-bottom: 1px solid #e5e7eb; padding: 16px; display: flex; justify-content: space-between; align-items: center; }
        .header-controls { display: flex; align-items: center; gap: 12px; }
        .language-selector { display: flex; align-items: center; gap: 8px; }
        .language-selector select { border: 1px solid #d1d5db; border-radius: 6px; padding: 4px 12px; font-size: 14px; }
        .human-help-btn { display: flex; align-items: center; gap: 8px; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 8px; background: white; cursor: pointer; font-size: 14px; }
        .human-help-btn:hover { background: #f9fafb; }
        .messages-area { flex: 1; overflow-y: auto; padding: 16px; }
        .message { display: flex; gap: 12px; margin-bottom: 16px; }
        .message.user { justify-content: flex-end; }
        .message-content { display: flex; gap: 12px; max-width: 80%; }
        .message.user .message-content { flex-direction: row-reverse; }
        .avatar { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .avatar.bot { background: #dbeafe; color: #2563eb; }
        .avatar.user { background: #f3f4f6; color: #6b7280; }
        .message-bubble { border-radius: 16px; padding: 12px 16px; }
        .message-bubble.bot { background: white; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .message-bubble.user { background: #2563eb; color: white; }
        .message-meta { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
        .language-tag, .confidence-tag { font-size: 12px; padding: 2px 8px; border-radius: 4px; }
        .language-tag { background: #f3f4f6; color: #374151; }
        .confidence-tag { background: #dbeafe; color: #1d4ed8; }
        .message-text { font-size: 14px; line-height: 1.5; margin-bottom: 4px; }
        .message-time { font-size: 12px; color: #6b7280; }
        .message.user .message-time { color: #bfdbfe; }
        .quick-actions { padding: 16px; }
        .quick-actions-panel { background: white; border-radius: 12px; padding: 16px; border: 1px solid #e5e7eb; }
        .quick-actions-title { font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 12px; }
        .actions-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 8px; }
        .action-btn { display: flex; align-items: center; gap: 8px; padding: 12px; border: 1px solid #e5e7eb; border-radius: 8px; background: white; cursor: pointer; text-align: left; transition: all 0.2s; }
        .action-btn:hover { background: #eff6ff; border-color: #93c5fd; }
        .action-icon { color: #2563eb; }
        .action-label { font-size: 12px; font-weight: 500; color: #374151; }
        .input-area { background: white; border-top: 1px solid #e5e7eb; padding: 16px; }
        .input-container { display: flex; gap: 8px; }
        .message-input { flex: 1; border: 1px solid #d1d5db; border-radius: 8px; padding: 12px 16px; font-size: 14px; }
        .message-input:focus { outline: none; border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1); }
        .send-btn { padding: 12px 16px; background: #2563eb; color: white; border: none; border-radius: 8px; cursor: pointer; }
        .send-btn:hover { background: #1d4ed8; }
        .send-btn:disabled { background: #9ca3af; cursor: not-allowed; }
        .input-hint { font-size: 12px; color: #6b7280; text-align: center; margin-top: 8px; }
        .loading { display: flex; justify-content: flex-start; }
        .loading-bubble { background: white; border: 1px solid #e5e7eb; border-radius: 16px; padding: 12px 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .loading-content { display: flex; align-items: center; gap: 8px; }
        .spinner { width: 16px; height: 16px; border: 2px solid #e5e7eb; border-top: 2px solid #2563eb; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="chat-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <button class="menu-btn" onclick="toggleSidebar()">‚ò∞</button>
                <h2 style="font-weight: bold; color: #111827; display: none;" id="sidebarTitle">Campus Assist</h2>
            </div>
            <nav style="padding: 0 8px;">
                <button class="nav-item active" id="chatNav" onclick="showPage('chat')">
                    üí¨ <span style="display: none;" class="nav-text">Chat</span>
                </button>
                <button class="nav-item" id="analyticsNav" onclick="showPage('analytics')">
                    üìä <span style="display: none;" class="nav-text">Analytics</span>
                </button>
                <button class="nav-item" id="adminNav" onclick="showPage('admin')">
                    üë• <span style="display: none;" class="nav-text">Admin</span>
                </button>
                <button class="nav-item" id="settingsNav" onclick="showPage('settings')">
                    ‚öôÔ∏è <span style="display: none;" class="nav-text">Settings</span>
                </button>
            </nav>
        </div>
        
        <!-- Main Chat Area -->
        <div class="main-chat" id="chatPage">
            <!-- Header -->
            <div class="chat-header">
                <div>
                    <h1 style="font-size: 20px; font-weight: bold; color: #111827;">Multilingual Campus Assistant</h1>
                    <p style="font-size: 14px; color: #6b7280;">Smart India Hackathon 2024 - Campus Query Solution</p>
                </div>
                <div class="header-controls">
                    <div class="language-selector">
                        üåê
                        <select onchange="changeLanguage(this.value)" id="languageSelect">
                            <option value="en">English</option>
                            <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                            <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
                            <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</option>
                            <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
                            <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                            <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
                            <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
                        </select>
                    </div>
                    <button class="human-help-btn">üìû Human Help</button>
                </div>
            </div>
            
            <!-- Messages Area -->
            <div class="messages-area" id="messagesArea">
                <div class="message bot">
                    <div class="message-content">
                        <div class="avatar bot">ü§ñ</div>
                        <div class="message-bubble bot">
                            <div class="message-meta">
                                <span class="language-tag">English</span>
                                <span class="confidence-tag">100% confident</span>
                            </div>
                            <div class="message-text" id="greetingText">Hello! I'm your multilingual campus assistant. I can help you with fees, scholarships, timetables, admissions, and other college information. You can talk to me in Hindi, English, or any of our supported regional languages!</div>
                            <div class="message-time" id="greetingTime"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="quick-actions" id="quickActions">
                <div class="quick-actions-panel">
                    <h3 class="quick-actions-title" id="quickTitle">Quick Help</h3>
                    <div class="actions-grid">
                        <button class="action-btn" onclick="sendQuickMessage('Tell me about fee structure and payment deadlines')">
                            <span class="action-icon">üí≥</span>
                            <span class="action-label" id="action1">Fee Information</span>
                        </button>
                        <button class="action-btn" onclick="sendQuickMessage('What scholarships are available for students?')">
                            <span class="action-icon">üéì</span>
                            <span class="action-label" id="action2">Scholarships</span>
                        </button>
                        <button class="action-btn" onclick="sendQuickMessage('Show me the current class timetable and schedule')">
                            <span class="action-icon">üìÖ</span>
                            <span class="action-label" id="action3">Timetable</span>
                        </button>
                        <button class="action-btn" onclick="sendQuickMessage('How do I apply for admission? What are the requirements?')">
                            <span class="action-icon">üìÑ</span>
                            <span class="action-label" id="action4">Admissions</span>
                        </button>
                        <button class="action-btn" onclick="sendQuickMessage('When are the upcoming exams and results?')">
                            <span class="action-icon">‚è∞</span>
                            <span class="action-label" id="action5">Exam Schedule</span>
                        </button>
                        <button class="action-btn" onclick="sendQuickMessage('What can you help me with? Show me all services')">
                            <span class="action-icon">‚ùì</span>
                            <span class="action-label" id="action6">General Help</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Input Area -->
            <div class="input-area">
                <div class="input-container">
                    <input type="text" id="messageInput" class="message-input" placeholder="Type your question here..." onkeypress="handleKeyPress(event)">
                    <button class="send-btn" onclick="sendMessage()">‚û§</button>
                </div>
                <p class="input-hint" id="inputHint">You can ask questions in Hindi, English, or other Indian languages</p>
            </div>
        </div>
        
        <!-- Analytics Page -->
        <div class="main-chat" id="analyticsPage" style="display: none;">
            <div class="chat-header">
                <div>
                    <h1 style="font-size: 20px; font-weight: bold; color: #111827;">Analytics Dashboard</h1>
                    <p style="font-size: 14px; color: #6b7280;">Monitor chatbot performance and user interactions</p>
                </div>
            </div>
            <div class="page-content" style="padding: 20px; overflow-y: auto; flex: 1;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div style="background: white; padding: 20px; border-radius: 12px; border: 1px solid #e5e7eb;">
                        <h3 style="color: #374151; margin-bottom: 10px;">Total Conversations</h3>
                        <div style="font-size: 32px; font-weight: bold; color: #111827;">247</div>
                        <p style="color: #10b981; font-size: 12px;">+12% from last week</p>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 12px; border: 1px solid #e5e7eb;">
                        <h3 style="color: #374151; margin-bottom: 10px;">Active Sessions</h3>
                        <div style="font-size: 32px; font-weight: bold; color: #111827;">12</div>
                        <p style="color: #10b981; font-size: 12px;">+8% from last week</p>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 12px; border: 1px solid #e5e7eb;">
                        <h3 style="color: #374151; margin-bottom: 10px;">Avg Response Time</h3>
                        <div style="font-size: 32px; font-weight: bold; color: #111827;">0.8s</div>
                        <p style="color: #ef4444; font-size: 12px;">-5% from last week</p>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 12px; border: 1px solid #e5e7eb;">
                        <h3 style="color: #374151; margin-bottom: 10px;">Satisfaction Rate</h3>
                        <div style="font-size: 32px; font-weight: bold; color: #111827;">94.2%</div>
                        <p style="color: #10b981; font-size: 12px;">+3% from last week</p>
                    </div>
                </div>
                <div style="background: white; padding: 20px; border-radius: 12px; border: 1px solid #e5e7eb;">
                    <h3 style="color: #374151; margin-bottom: 15px;">Language Usage Distribution</h3>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <span style="padding: 5px 10px; background: #eff6ff; color: #2563eb; border-radius: 20px; font-size: 12px;">English: 45%</span>
                        <span style="padding: 5px 10px; background: #f0fdf4; color: #16a34a; border-radius: 20px; font-size: 12px;">Hindi: 25%</span>
                        <span style="padding: 5px 10px; background: #fef7ff; color: #a855f7; border-radius: 20px; font-size: 12px;">Marathi: 15%</span>
                        <span style="padding: 5px 10px; background: #fffbeb; color: #d97706; border-radius: 20px; font-size: 12px;">Gujarati: 10%</span>
                        <span style="padding: 5px 10px; background: #fef2f2; color: #dc2626; border-radius: 20px; font-size: 12px;">Others: 5%</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Admin Page -->
        <div class="main-chat" id="adminPage" style="display: none;">
            <div class="chat-header">
                <div>
                    <h1 style="font-size: 20px; font-weight: bold; color: #111827;">Knowledge Base Management</h1>
                    <p style="font-size: 14px; color: #6b7280;">Manage FAQs and responses for the chatbot</p>
                </div>
                <button style="background: #2563eb; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer;">+ Add New Item</button>
            </div>
            <div class="page-content" style="padding: 20px; overflow-y: auto; flex: 1;">
                <div style="background: white; border-radius: 12px; border: 1px solid #e5e7eb; padding: 20px;">
                    <h3 style="margin-bottom: 15px;">Search & Filter</h3>
                    <div style="display: flex; gap: 15px; margin-bottom: 20px;">
                        <input type="text" placeholder="Search questions or answers..." style="flex: 1; border: 1px solid #d1d5db; border-radius: 8px; padding: 8px 12px;">
                        <select style="border: 1px solid #d1d5db; border-radius: 8px; padding: 8px 12px;">
                            <option>All Categories</option>
                            <option>Fees</option>
                            <option>Admissions</option>
                            <option>Scholarships</option>
                        </select>
                        <select style="border: 1px solid #d1d5db; border-radius: 8px; padding: 8px 12px;">
                            <option>All Languages</option>
                            <option>English</option>
                            <option>Hindi</option>
                            <option>Marathi</option>
                        </select>
                    </div>
                    <div style="text-align: center; color: #6b7280; padding: 40px;">
                        üìã No knowledge base entries found. Click "Add New Item" to create your first FAQ.
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Settings Page -->
        <div class="main-chat" id="settingsPage" style="display: none;">
            <div class="chat-header">
                <div>
                    <h1 style="font-size: 20px; font-weight: bold; color: #111827;">Chatbot Settings</h1>
                    <p style="font-size: 14px; color: #6b7280;">Configure your multilingual campus assistant</p>
                </div>
                <button style="background: #2563eb; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer;">üíæ Save Settings</button>
            </div>
            <div class="page-content" style="padding: 20px; overflow-y: auto; flex: 1;">
                <div style="background: white; border-radius: 12px; border: 1px solid #e5e7eb; padding: 30px; max-width: 800px;">
                    <h3 style="margin-bottom: 20px; color: #374151;">‚öôÔ∏è General Settings</h3>
                    <div style="display: grid; gap: 20px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 500;">Chatbot Name</label>
                            <input type="text" value="Campus Assistant" style="width: 100%; border: 1px solid #d1d5db; border-radius: 8px; padding: 10px;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 500;">Default Language</label>
                            <select style="width: 100%; border: 1px solid #d1d5db; border-radius: 8px; padding: 10px;">
                                <option>English</option>
                                <option>Hindi</option>
                                <option>Marathi</option>
                            </select>
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 500;">Welcome Message</label>
                            <textarea style="width: 100%; border: 1px solid #d1d5db; border-radius: 8px; padding: 10px; rows: 3;">Hello! I'm your campus assistant. I can help you with fees, scholarships, timetables, and other college information.</textarea>
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 500;">Max Response Length</label>
                            <input type="number" value="500" style="width: 100%; border: 1px solid #d1d5db; border-radius: 8px; padding: 10px;">
                            <p style="font-size: 12px; color: #6b7280; margin-top: 5px;">Maximum characters in chatbot responses</p>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <label style="font-weight: 500;">Enable Multilingual Support</label>
                                <p style="font-size: 12px; color: #6b7280;">Allow users to chat in multiple languages</p>
                            </div>
                            <input type="checkbox" checked style="transform: scale(1.5);">
                        </div>
                        <div style="padding: 15px; background: #fef3cd; border: 1px solid #fbbf24; border-radius: 8px;">
                            <h4 style="color: #92400e; margin-bottom: 5px;">üîë API Configuration</h4>
                            <p style="font-size: 12px; color: #92400e; margin-bottom: 10px;">Configure translation APIs for advanced multilingual support</p>
                            <input type="password" placeholder="Enter Google Translate API Key" style="width: 100%; border: 1px solid #d1d5db; border-radius: 6px; padding: 8px; margin-bottom: 8px;">
                            <input type="password" placeholder="Enter OpenAI API Key (Optional)" style="width: 100%; border: 1px solid #d1d5db; border-radius: 6px; padding: 8px;">
                        </div>
                    </div>
                </div>
            </div>
        </div>
            <!-- Header -->
            <div class="chat-header">
                <div>
                    <h1 style="font-size: 20px; font-weight: bold; color: #111827;">Multilingual Campus Assistant</h1>
                    <p style="font-size: 14px; color: #6b7280;">Smart India Hackathon 2024 - Campus Query Solution</p>
                </div>
                <div class="header-controls">
                    <div class="language-selector">
                        üåê
                        <select onchange="changeLanguage(this.value)" id="languageSelect">
                            <option value="en">English</option>
                            <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                            <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
                            <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</option>
                            <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
                            <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                            <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
                            <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
                        </select>
                    </div>
                    <button class="human-help-btn">üìû Human Help</button>
                </div>
            </div>
            
            <!-- Messages Area -->
            <div class="messages-area" id="messagesArea">
                <div class="message bot">
                    <div class="message-content">
                        <div class="avatar bot">ü§ñ</div>
                        <div class="message-bubble bot">
                            <div class="message-meta">
                                <span class="language-tag">English</span>
                                <span class="confidence-tag">100% confident</span>
                            </div>
                            <div class="message-text" id="greetingText">Hello! I'm your multilingual campus assistant. I can help you with fees, scholarships, timetables, admissions, and other college information. You can talk to me in Hindi, English, or any of our supported regional languages!</div>
                            <div class="message-time" id="greetingTime"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="quick-actions" id="quickActions">
                <div class="quick-actions-panel">
                    <h3 class="quick-actions-title" id="quickTitle">Quick Help</h3>
                    <div class="actions-grid">
                        <button class="action-btn" onclick="sendQuickMessage('Tell me about fee structure and payment deadlines')">
                            <span class="action-icon">üí≥</span>
                            <span class="action-label" id="action1">Fee Information</span>
                        </button>
                        <button class="action-btn" onclick="sendQuickMessage('What scholarships are available for students?')">
                            <span class="action-icon">üéì</span>
                            <span class="action-label" id="action2">Scholarships</span>
                        </button>
                        <button class="action-btn" onclick="sendQuickMessage('Show me the current class timetable and schedule')">
                            <span class="action-icon">üìÖ</span>
                            <span class="action-label" id="action3">Timetable</span>
                        </button>
                        <button class="action-btn" onclick="sendQuickMessage('How do I apply for admission? What are the requirements?')">
                            <span class="action-icon">üìÑ</span>
                            <span class="action-label" id="action4">Admissions</span>
                        </button>
                        <button class="action-btn" onclick="sendQuickMessage('When are the upcoming exams and results?')">
                            <span class="action-icon">‚è∞</span>
                            <span class="action-label" id="action5">Exam Schedule</span>
                        </button>
                        <button class="action-btn" onclick="sendQuickMessage('What can you help me with? Show me all services')">
                            <span class="action-icon">‚ùì</span>
                            <span class="action-label" id="action6">General Help</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Input Area -->
            <div class="input-area">
                <div class="input-container">
                    <input type="text" id="messageInput" class="message-input" placeholder="Type your question here..." onkeypress="handleKeyPress(event)">
                    <button class="send-btn" onclick="sendMessage()">‚û§</button>
                </div>
                <p class="input-hint" id="inputHint">You can ask questions in Hindi, English, or other Indian languages</p>
            </div>
        </div>
    </div>

    <script>
        let currentLanguage = 'en';
        let sidebarExpanded = false;
        let messageCount = 1;
        let currentPage = 'chat';
        let translateApiKey = '';
        let openaiApiKey = '';
        
        const languages = {
            en: {
                greeting: "Hello! I'm your multilingual campus assistant. I can help you with fees, scholarships, timetables, admissions, and other college information. You can talk to me in Hindi, English, or any of our supported regional languages!",
                thinking: "Processing your query...",
                quickTitle: "Quick Help",
                actions: ["Fee Information", "Scholarships", "Timetable", "Admissions", "Exam Schedule", "General Help"],
                placeholder: "Type your question here...",
                hint: "You can ask questions in Hindi, English, or other Indian languages"
            },
            hi: {
                greeting: "‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§¨‡§π‡•Å‡§≠‡§æ‡§∑‡•Ä ‡§ï‡•à‡§Ç‡§™‡§∏ ‡§Ö‡§∏‡§ø‡§∏‡•ç‡§ü‡•á‡§Ç‡§ü ‡§π‡•Ç‡§Å‡•§ ‡§Æ‡•à‡§Ç ‡§´‡•Ä‡§∏, ‡§õ‡§æ‡§§‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø, ‡§∏‡§Æ‡§Ø ‡§∏‡§æ‡§∞‡§£‡•Ä, ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§ï‡•â‡§≤‡•á‡§ú ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å‡•§ ‡§Ü‡§™ ‡§π‡§ø‡§Ç‡§¶‡•Ä, ‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•Ä ‡§Ø‡§æ ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§∏‡§Æ‡§∞‡•ç‡§•‡§ø‡§§ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•Ä‡§Ø ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§Æ‡•Å‡§ù‡§∏‡•á ‡§¨‡§æ‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç!",
                thinking: "‡§Ü‡§™‡§ï‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ï‡•ã ‡§∏‡§Æ‡§ù ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å...",
                quickTitle: "‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ",
                actions: ["‡§´‡•Ä‡§∏ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä", "‡§õ‡§æ‡§§‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø", "‡§∏‡§Æ‡§Ø ‡§∏‡§æ‡§∞‡§£‡•Ä", "‡§™‡•ç‡§∞‡§µ‡•á‡§∂", "‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§∏‡§Æ‡§Ø", "‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ"],
                placeholder: "‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§≤‡§ø‡§ñ‡•á‡§Ç...",
                hint: "‡§Ü‡§™ ‡§π‡§ø‡§Ç‡§¶‡•Ä, ‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•Ä ‡§Ø‡§æ ‡§Ö‡§®‡•ç‡§Ø ‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§≠‡§æ‡§∑‡§æ‡§ì‡§Ç ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç"
            },
            mr: {
                greeting: "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞! ‡§Æ‡•Ä ‡§§‡•Å‡§Æ‡§ö‡§æ ‡§¨‡§π‡•Å‡§≠‡§æ‡§∑‡§ø‡§ï ‡§ï‡•Ö‡§Æ‡•ç‡§™‡§∏ ‡§Ö‡§∏‡§ø‡§∏‡•ç‡§ü‡§Ç‡§ü ‡§Ü‡§π‡•á‡•§ ‡§Æ‡•Ä ‡§´‡•Ä, ‡§∂‡§ø‡§∑‡•ç‡§Ø‡§µ‡•É‡§§‡•ç‡§§‡•Ä, ‡§µ‡•á‡§≥‡§æ‡§™‡§§‡•ç‡§∞‡§ï, ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§Ü‡§£‡§ø ‡§á‡§§‡§∞ ‡§Æ‡§π‡§æ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø‡•Ä‡§® ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§Æ‡§¶‡§§ ‡§ï‡§∞‡•Ç ‡§∂‡§ï‡§§‡•ã‡•§ ‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä ‡§Æ‡§∞‡§æ‡§†‡•Ä, ‡§á‡§Ç‡§ó‡•ç‡§∞‡§ú‡•Ä ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§Ü‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§ï‡•ã‡§£‡§§‡•ç‡§Ø‡§æ‡§π‡•Ä ‡§∏‡§Æ‡§∞‡•ç‡§•‡§ø‡§§ ‡§™‡•ç‡§∞‡§æ‡§¶‡•á‡§∂‡§ø‡§ï ‡§≠‡§æ‡§∑‡•á‡§§ ‡§Æ‡§æ‡§ù‡•ç‡§Ø‡§æ‡§∂‡•Ä ‡§¨‡•ã‡§≤‡•Ç ‡§∂‡§ï‡§§‡§æ!",
                thinking: "‡§§‡•Å‡§Æ‡§ö‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∏‡§Æ‡§ú‡•Ç‡§® ‡§ò‡•á‡§§ ‡§Ü‡§π‡•á...",
                quickTitle: "‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§Æ‡§¶‡§§",
                actions: ["‡§´‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä", "‡§∂‡§ø‡§∑‡•ç‡§Ø‡§µ‡•É‡§§‡•ç‡§§‡•Ä", "‡§µ‡•á‡§≥‡§æ‡§™‡§§‡•ç‡§∞‡§ï", "‡§™‡•ç‡§∞‡§µ‡•á‡§∂", "‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§µ‡•á‡§≥", "‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Æ‡§¶‡§§"],
                placeholder: "‡§Ø‡•á‡§•‡•á ‡§§‡•Å‡§Æ‡§ö‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§≤‡§ø‡§π‡§æ...",
                hint: "‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä ‡§Æ‡§∞‡§æ‡§†‡•Ä, ‡§á‡§Ç‡§ó‡•ç‡§∞‡§ú‡•Ä ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§á‡§§‡§∞ ‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§≠‡§æ‡§∑‡§æ‡§Ç‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§µ‡§ø‡§ö‡§æ‡§∞‡•Ç ‡§∂‡§ï‡§§‡§æ"
            },
            gu: {
                greeting: "‡™®‡™Æ‡™∏‡´ç‡™§‡´á! ‡™π‡´Å‡™Ç ‡™§‡™Æ‡™æ‡™∞‡´ã ‡™¨‡™π‡´Å‡™≠‡™æ‡™∑‡´Ä ‡™ï‡´á‡™Æ‡´ç‡™™‡™∏ ‡™Ü‡™∏‡™ø‡™∏‡´ç‡™ü‡™®‡´ç‡™ü ‡™õ‡´Å‡™Ç‡•§ ‡™π‡´Å‡™Ç ‡™´‡´Ä, ‡™∂‡™ø‡™∑‡´ç‡™Ø‡™µ‡´É‡™§‡´ç‡™§‡™ø, ‡™∏‡™Æ‡™Ø‡™™‡™§‡´ç‡™∞‡™ï, ‡™™‡´ç‡™∞‡™µ‡´á‡™∂ ‡™Ö‡™®‡´á ‡™Ö‡™®‡´ç‡™Ø ‡™ï‡´ã‡™≤‡´á‡™ú‡™®‡´Ä ‡™Æ‡™æ‡™π‡™ø‡™§‡´Ä‡™Æ‡™æ‡™Ç ‡™§‡™Æ‡™æ‡™∞‡´Ä ‡™Æ‡™¶‡™¶ ‡™ï‡™∞‡´Ä ‡™∂‡™ï‡´Å‡™Ç ‡™õ‡´Å‡™Ç‡•§ ‡™§‡™Æ‡´á ‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä, ‡™Ö‡™Ç‡™ó‡´ç‡™∞‡´á‡™ú‡´Ä ‡™Ö‡™•‡™µ‡™æ ‡™Ö‡™Æ‡™æ‡™∞‡´Ä ‡™ï‡´ã‡™à‡™™‡™£ ‡™∏‡™Æ‡™∞‡´ç‡™•‡™ø‡™§ ‡™™‡´ç‡™∞‡™æ‡™¶‡´á‡™∂‡™ø‡™ï ‡™≠‡™æ‡™∑‡™æ‡™Æ‡™æ‡™Ç ‡™Æ‡™æ‡™∞‡´Ä ‡™∏‡™æ‡™•‡´á ‡™µ‡™æ‡™§ ‡™ï‡™∞‡´Ä ‡™∂‡™ï‡´ã ‡™õ‡´ã!",
                thinking: "‡™§‡™Æ‡™æ‡™∞‡™æ ‡™™‡´ç‡™∞‡™∂‡´ç‡™®‡™®‡´á ‡™∏‡™Æ‡™ú‡´Ä ‡™∞‡™π‡´ç‡™Ø‡´ã ‡™õ‡´Å‡™Ç...",
                quickTitle: "‡™ù‡™°‡™™‡´Ä ‡™Æ‡™¶‡™¶",
                actions: ["‡™´‡´Ä ‡™Æ‡™æ‡™π‡™ø‡™§‡´Ä", "‡™∂‡™ø‡™∑‡´ç‡™Ø‡™µ‡´É‡™§‡´ç‡™§‡™ø", "‡™∏‡™Æ‡™Ø‡™™‡™§‡´ç‡™∞‡™ï", "‡™™‡´ç‡™∞‡™µ‡´á‡™∂", "‡™™‡™∞‡´Ä‡™ï‡´ç‡™∑‡™æ ‡™∏‡™Æ‡™Ø", "‡™∏‡™æ‡™Æ‡™æ‡™®‡´ç‡™Ø ‡™Æ‡™¶‡™¶"],
                placeholder: "‡™Ö‡™π‡´Ä‡™Ç ‡™§‡™Æ‡™æ‡™∞‡´ã ‡™™‡´ç‡™∞‡™∂‡´ç‡™® ‡™≤‡™ñ‡´ã...",
                hint: "‡™§‡™Æ‡´á ‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä, ‡™Ö‡™Ç‡™ó‡´ç‡™∞‡´á‡™ú‡´Ä ‡™Ö‡™•‡™µ‡™æ ‡™Ö‡™®‡´ç‡™Ø ‡™≠‡™æ‡™∞‡™§‡´Ä‡™Ø ‡™≠‡™æ‡™∑‡™æ‡™ì‡™Æ‡™æ‡™Ç ‡™™‡´ç‡™∞‡™∂‡´ç‡™® ‡™™‡´Ç‡™õ‡´Ä ‡™∂‡™ï‡´ã ‡™õ‡´ã"
            }
        };

        function showPage(page) {
            // Hide all pages
            document.getElementById('chatPage').style.display = 'none';
            document.getElementById('analyticsPage').style.display = 'none';
            document.getElementById('adminPage').style.display = 'none';
            document.getElementById('settingsPage').style.display = 'none';
            
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            
            // Show selected page and activate nav
            document.getElementById(page + 'Page').style.display = 'flex';
            document.getElementById(page + 'Nav').classList.add('active');
            currentPage = page;
        }
        
        async function translateText(text, targetLang) {
            if (!translateApiKey) {
                return text; // Return original if no API key
            }
            
            try {
                const response = await fetch(`https://translation.googleapis.com/language/translate/v2?key=${translateApiKey}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        q: text,
                        target: targetLang,
                        format: 'text'
                    })
                });
                
                const data = await response.json();
                return data.data.translations[0].translatedText;
            } catch (error) {
                console.error('Translation error:', error);
                return text; // Return original on error
            }
        }
        
        async function detectAndTranslateToEnglish(text) {
            if (!translateApiKey) {
                return text; // Return original if no API key
            }
            
            try {
                // First detect language
                const detectResponse = await fetch(`https://translation.googleapis.com/language/translate/v2/detect?key=${translateApiKey}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        q: text
                    })
                });
                
                const detectData = await detectResponse.json();
                const detectedLang = detectData.data.detections[0][0].language;
                
                // If already English, return as is
                if (detectedLang === 'en') {
                    return text;
                }
                
                // Translate to English
                const translateResponse = await fetch(`https://translation.googleapis.com/language/translate/v2?key=${translateApiKey}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        q: text,
                        target: 'en',
                        format: 'text'
                    })
                });
                
                const translateData = await translateResponse.json();
                return translateData.data.translations[0].translatedText;
            } catch (error) {
                console.error('Translation error:', error);
                return text; // Return original on error
            }
        }

        function toggleSidebar() {
            sidebarExpanded = !sidebarExpanded;
            const sidebar = document.getElementById('sidebar');
            const title = document.getElementById('sidebarTitle');
            const navTexts = document.querySelectorAll('.nav-text');
            
            if (sidebarExpanded) {
                sidebar.classList.add('expanded');
                title.style.display = 'block';
                navTexts.forEach(text => text.style.display = 'inline');
            } else {
                sidebar.classList.remove('expanded');
                title.style.display = 'none';
                navTexts.forEach(text => text.style.display = 'none');
            }
        }

        function changeLanguage(lang) {
            currentLanguage = lang;
            const langData = languages[lang] || languages.en;
            
            // Update greeting
            document.getElementById('greetingText').textContent = langData.greeting;
            
            // Update quick actions
            document.getElementById('quickTitle').textContent = langData.quickTitle;
            for (let i = 1; i <= 6; i++) {
                document.getElementById(`action${i}`).textContent = langData.actions[i-1];
            }
            
            // Update placeholder and hint
            document.getElementById('messageInput').placeholder = langData.placeholder;
            document.getElementById('inputHint').textContent = langData.hint;
        }

        function sendQuickMessage(message) {
            sendMessage(message);
            document.getElementById('quickActions').style.display = 'none';
        }

        async function sendMessage(customMessage) {
            const input = document.getElementById('messageInput');
            const message = customMessage || input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addMessage(message, false);
            input.value = '';
            
            // Show loading
            showLoading();
            
            try {
                // Step 1: Translate user input to English for database lookup
                const englishQuery = await detectAndTranslateToEnglish(message);
                
                // Step 2: Get response from database (simulate for now)
                const englishResponse = generateResponse(englishQuery);
                
                // Step 3: Translate response to user's selected language
                const langCode = getLangCode(currentLanguage);
                const translatedResponse = langCode === 'en' ? englishResponse : await translateText(englishResponse, langCode);
                
                hideLoading();
                addMessage(translatedResponse, true);
            } catch (error) {
                hideLoading();
                console.error('Message processing error:', error);
                const fallbackResponse = generateResponse(message);
                addMessage(fallbackResponse, true);
            }
        }
        
        function getLangCode(language) {
            const langMap = {
                'en': 'en',
                'hi': 'hi', 
                'mr': 'mr',
                'gu': 'gu',
                'bn': 'bn',
                'ta': 'ta',
                'te': 'te',
                'kn': 'kn'
            };
            return langMap[language] || 'en';
        }

        function addMessage(text, isBot) {
            const messagesArea = document.getElementById('messagesArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isBot ? 'bot' : 'user'}`;
            
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            
            messageDiv.innerHTML = `
                <div class="message-content">
                    <div class="avatar ${isBot ? 'bot' : 'user'}">${isBot ? 'ü§ñ' : 'üë§'}</div>
                    <div class="message-bubble ${isBot ? 'bot' : 'user'}">
                        ${isBot ? `
                            <div class="message-meta">
                                <span class="language-tag">${currentLanguage === 'hi' ? 'Hindi' : currentLanguage === 'mr' ? 'Marathi' : currentLanguage === 'gu' ? 'Gujarati' : 'English'}</span>
                                <span class="confidence-tag">95% confident</span>
                            </div>
                        ` : ''}
                        <div class="message-text">${text}</div>
                        <div class="message-time">${time}</div>
                    </div>
                </div>
            `;
            
            messagesArea.appendChild(messageDiv);
            messagesArea.scrollTop = messagesArea.scrollHeight;
        }

        function showLoading() {
            const messagesArea = document.getElementById('messagesArea');
            const loadingDiv = document.createElement('div');
            loadingDiv.id = 'loadingMessage';
            loadingDiv.className = 'loading';
            loadingDiv.innerHTML = `
                <div class="loading-bubble">
                    <div class="loading-content">
                        <div class="spinner"></div>
                        <span>${languages[currentLanguage]?.thinking || 'Processing your query...'}</span>
                    </div>
                </div>
            `;
            messagesArea.appendChild(loadingDiv);
            messagesArea.scrollTop = messagesArea.scrollHeight;
        }

        function hideLoading() {
            const loading = document.getElementById('loadingMessage');
            if (loading) loading.remove();
        }

        function generateResponse(message) {
            const lower = message.toLowerCase();
            
            if (lower.includes('fee') || lower.includes('‡§´‡•Ä‡§∏') || lower.includes('‡§´‡•Ä')) {
                if (currentLanguage === 'hi') {
                    return "‡§´‡•Ä‡§∏ ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä: ‡§∂‡•à‡§ï‡•ç‡§∑‡§£‡§ø‡§ï ‡§µ‡§∞‡•ç‡§∑ 2024-25 ‡§ï‡•á ‡§≤‡§ø‡§è ‡§´‡•Ä‡§∏ ‚Çπ50,000 ‡§π‡•à‡•§ ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§§‡§æ‡§∞‡•Ä‡§ñ 15 ‡§ú‡§®‡§µ‡§∞‡•Ä ‡§π‡•à‡•§ ‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•â‡§≤‡•á‡§ú ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§";
                } else if (currentLanguage === 'mr') {
                    return "‡§´‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä: 2024-25 ‡§∂‡•à‡§ï‡•ç‡§∑‡§£‡§ø‡§ï ‡§µ‡§∞‡•ç‡§∑‡§æ‡§∏‡§æ‡§†‡•Ä ‡§´‡•Ä ‚Çπ50,000 ‡§Ü‡§π‡•á‡•§ ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§§‡§æ‡§∞‡•Ä‡§ñ 15 ‡§ú‡§æ‡§®‡•á‡§µ‡§æ‡§∞‡•Ä ‡§Ü‡§π‡•á‡•§ ‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü‡§∏‡§æ‡§†‡•Ä ‡§ï‡•â‡§≤‡•á‡§ú ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤ ‡§µ‡§æ‡§™‡§∞‡§æ‡•§";
                } else if (currentLanguage === 'gu') {
                    return "‡™´‡´Ä ‡™Æ‡™æ‡™π‡™ø‡™§‡´Ä: 2024-25 ‡™∂‡´à‡™ï‡´ç‡™∑‡™£‡™ø‡™ï ‡™µ‡™∞‡´ç‡™∑ ‡™Æ‡™æ‡™ü‡´á ‡™´‡´Ä ‚Çπ50,000 ‡™õ‡´á‡•§ ‡™õ‡´á‡™≤‡´ç‡™≤‡´Ä ‡™§‡™æ‡™∞‡´Ä‡™ñ 15 ‡™ú‡™æ‡™®‡´ç‡™Ø‡´Å‡™Ü‡™∞‡´Ä ‡™õ‡´á‡•§ ‡™ì‡™®‡™≤‡™æ‡™á‡™® ‡™™‡´á‡™Æ‡´á‡™Ç‡™ü ‡™Æ‡™æ‡™ü‡´á ‡™ï‡´ã‡™≤‡´á‡™ú ‡™™‡´ã‡™∞‡´ç‡™ü‡™≤‡™®‡´ã ‡™â‡™™‡™Ø‡´ã‡™ó ‡™ï‡™∞‡´ã‡•§";
                } else {
                    return "Fee Information: The academic fee for 2024-25 is ‚Çπ50,000. Last date for payment is January 15th. You can pay online through the college portal.";
                }
            } else if (lower.includes('scholarship') || lower.includes('‡§õ‡§æ‡§§‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø') || lower.includes('‡§∂‡§ø‡§∑‡•ç‡§Ø‡§µ‡•É‡§§‡•ç‡§§‡•Ä')) {
                if (currentLanguage === 'hi') {
                    return "‡§õ‡§æ‡§§‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä: ‡§Æ‡•á‡§ß‡§æ‡§µ‡•Ä ‡§õ‡§æ‡§§‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø, ‡§Ü‡§∞‡•ç‡§•‡§ø‡§ï ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ, ‡§î‡§∞ ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§õ‡§æ‡§§‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•à‡•§ ‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡•Ä ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§§‡§æ‡§∞‡•Ä‡§ñ 30 ‡§¶‡§ø‡§∏‡§Ç‡§¨‡§∞ ‡§π‡•à‡•§";
                } else if (currentLanguage === 'mr') {
                    return "‡§∂‡§ø‡§∑‡•ç‡§Ø‡§µ‡•É‡§§‡•ç‡§§‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä: ‡§Æ‡•á‡§ß‡§æ‡§µ‡•Ä ‡§∂‡§ø‡§∑‡•ç‡§Ø‡§µ‡•É‡§§‡•ç‡§§‡•Ä, ‡§Ü‡§∞‡•ç‡§•‡§ø‡§ï ‡§Æ‡§¶‡§§ ‡§Ü‡§£‡§ø ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§µ‡§∞‡•ç‡§ó ‡§∂‡§ø‡§∑‡•ç‡§Ø‡§µ‡•É‡§§‡•ç‡§§‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§Ü‡§π‡•á‡§§‡•§ ‡§Ö‡§∞‡•ç‡§ú‡§æ‡§ö‡•Ä ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§§‡§æ‡§∞‡•Ä‡§ñ 30 ‡§°‡§ø‡§∏‡•á‡§Ç‡§¨‡§∞ ‡§Ü‡§π‡•á‡•§";
                } else if (currentLanguage === 'gu') {
                    return "‡™∂‡™ø‡™∑‡´ç‡™Ø‡™µ‡´É‡™§‡´ç‡™§‡™ø ‡™Æ‡™æ‡™π‡™ø‡™§‡´Ä: ‡™Æ‡´á‡™ß‡™æ‡™µ‡´Ä ‡™∂‡™ø‡™∑‡´ç‡™Ø‡™µ‡´É‡™§‡´ç‡™§‡™ø, ‡™Ü‡™∞‡´ç‡™•‡™ø‡™ï ‡™∏‡™π‡™æ‡™Ø ‡™Ö‡™®‡´á ‡™µ‡™ø‡™∂‡´á‡™∑ ‡™µ‡™∞‡´ç‡™ó ‡™∂‡™ø‡™∑‡´ç‡™Ø‡™µ‡´É‡™§‡´ç‡™§‡™ø ‡™â‡™™‡™≤‡™¨‡´ç‡™ß ‡™õ‡´á‡•§ ‡™Ö‡™∞‡™ú‡´Ä‡™®‡´Ä ‡™õ‡´á‡™≤‡´ç‡™≤‡´Ä ‡™§‡™æ‡™∞‡´Ä‡™ñ 30 ‡™°‡™ø‡™∏‡´á‡™Æ‡´ç‡™¨‡™∞ ‡™õ‡´á‡•§";
                } else {
                    return "Scholarship Information: Merit scholarships, financial aid, and category-specific scholarships are available. Application deadline is December 30th.";
                }
            } else if (lower.includes('timetable') || lower.includes('‡§∏‡§Æ‡§Ø') || lower.includes('‡§µ‡•á‡§≥‡§æ‡§™‡§§‡•ç‡§∞‡§ï')) {
                if (currentLanguage === 'hi') {
                    return "‡§∏‡§Æ‡§Ø ‡§∏‡§æ‡§∞‡§£‡•Ä: ‡§ï‡§ï‡•ç‡§∑‡§æ‡§è‡§Ç ‡§∏‡•Å‡§¨‡§π 9:00 ‡§¨‡§ú‡•á ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§®‡§µ‡•Ä‡§®‡§§‡§Æ ‡§∏‡§Æ‡§Ø ‡§∏‡§æ‡§∞‡§£‡•Ä ‡§ï‡•â‡§≤‡•á‡§ú ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§™‡§∞ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•à‡•§";
                } else if (currentLanguage === 'mr') {
                    return "‡§µ‡•á‡§≥‡§æ‡§™‡§§‡•ç‡§∞‡§ï: ‡§µ‡§∞‡•ç‡§ó ‡§∏‡§ï‡§æ‡§≥‡•Ä 9:00 ‡§µ‡§æ‡§ú‡§§‡§æ ‡§∏‡•Å‡§∞‡•Ç ‡§π‡•ã‡§§‡§æ‡§§‡•§ ‡§®‡§µ‡•Ä‡§®‡§§‡§Æ ‡§µ‡•á‡§≥‡§æ‡§™‡§§‡•ç‡§∞‡§ï ‡§ï‡•â‡§≤‡•á‡§ú ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü‡§µ‡§∞ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§Ü‡§π‡•á‡•§";
                } else if (currentLanguage === 'gu') {
                    return "‡™∏‡™Æ‡™Ø‡™™‡™§‡´ç‡™∞‡™ï: ‡™µ‡™∞‡´ç‡™ó‡´ã ‡™∏‡™µ‡™æ‡™∞‡´á 9:00 ‡™µ‡™æ‡™ó‡´ç‡™Ø‡´á ‡™∂‡™∞‡´Ç ‡™•‡™æ‡™Ø ‡™õ‡´á‡•§ ‡™®‡™µ‡´Ä‡™®‡™§‡™Æ ‡™∏‡™Æ‡™Ø‡™™‡™§‡´ç‡™∞‡™ï ‡™ï‡´ã‡™≤‡´á‡™ú ‡™µ‡´á‡™¨‡™∏‡™æ‡™á‡™ü ‡™™‡™∞ ‡™â‡™™‡™≤‡™¨‡´ç‡™ß ‡™õ‡´á‡•§";
                } else {
                    return "Timetable: Classes start at 9:00 AM. The latest timetable is available on the college website and notice board.";
                }
            } else {
                if (currentLanguage === 'hi') {
                    return "‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π‡§æ‡§Å ‡§π‡•Ç‡§Å‡•§ ‡§Æ‡•à‡§Ç ‡§´‡•Ä‡§∏, ‡§õ‡§æ‡§§‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø, ‡§∏‡§Æ‡§Ø ‡§∏‡§æ‡§∞‡§£‡•Ä, ‡§™‡•ç‡§∞‡§µ‡•á‡§∂, ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§î‡§∞ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ï‡•â‡§≤‡•á‡§ú ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å‡•§";
                } else if (currentLanguage === 'mr') {
                    return "‡§Æ‡•Ä ‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§Æ‡§¶‡§§‡•Ä‡§∏‡§æ‡§†‡•Ä ‡§Ø‡•á‡§•‡•á ‡§Ü‡§π‡•á‡•§ ‡§Æ‡•Ä ‡§´‡•Ä, ‡§∂‡§ø‡§∑‡•ç‡§Ø‡§µ‡•É‡§§‡•ç‡§§‡•Ä, ‡§µ‡•á‡§≥‡§æ‡§™‡§§‡•ç‡§∞‡§ï, ‡§™‡•ç‡§∞‡§µ‡•á‡§∂, ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§Ü‡§£‡§ø ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ï‡•â‡§≤‡•á‡§ú ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§Æ‡§¶‡§§ ‡§ï‡§∞‡•Ç ‡§∂‡§ï‡§§‡•ã‡•§";
                } else if (currentLanguage === 'gu') {
                    return "‡™π‡´Å‡™Ç ‡™§‡™Æ‡™æ‡™∞‡´Ä ‡™Æ‡™¶‡™¶ ‡™Æ‡™æ‡™ü‡´á ‡™Ö‡™π‡´Ä‡™Ç ‡™õ‡´Å‡™Ç‡•§ ‡™π‡´Å‡™Ç ‡™´‡´Ä, ‡™∂‡™ø‡™∑‡´ç‡™Ø‡™µ‡´É‡™§‡´ç‡™§‡™ø, ‡™∏‡™Æ‡™Ø‡™™‡™§‡´ç‡™∞‡™ï, ‡™™‡´ç‡™∞‡™µ‡´á‡™∂, ‡™™‡™∞‡´Ä‡™ï‡´ç‡™∑‡™æ ‡™ï‡™æ‡™∞‡´ç‡™Ø‡™ï‡´ç‡™∞‡™Æ ‡™Ö‡™®‡´á ‡™∏‡™æ‡™Æ‡™æ‡™®‡´ç‡™Ø ‡™ï‡´ã‡™≤‡´á‡™ú‡™®‡´Ä ‡™Æ‡™æ‡™π‡™ø‡™§‡´Ä‡™Æ‡™æ‡™Ç ‡™Æ‡™¶‡™¶ ‡™ï‡™∞‡´Ä ‡™∂‡™ï‡´Å‡™Ç ‡™õ‡´Å‡™Ç‡•§";
                } else {
                    return "I'm here to help you! I can assist with fees, scholarships, timetables, admissions, exam schedules, and general college information.";
                }
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Initialize with current time
        document.getElementById('greetingTime').textContent = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        
        // Load API keys from localStorage if available
        const savedTranslateKey = localStorage.getItem('translateApiKey');
        const savedOpenaiKey = localStorage.getItem('openaiApiKey');
        
        if (savedTranslateKey) {
            translateApiKey = savedTranslateKey;
        }
        if (savedOpenaiKey) {
            openaiApiKey = savedOpenaiKey;
        }
    </script>
</body>
</html>